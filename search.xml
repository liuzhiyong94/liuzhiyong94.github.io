<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>通过正则表达式截取字符串中的字符</title>
    <url>/2020/09/17/reg-intercept-string/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> reg =  <span class="regexp">/(?&lt;=(aaa)).&#123;1,100&#125;(?=(ccc))/g</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">"aaabbbcccddd"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> res = str.match(reg);   <span class="comment">// ["bbb"]</span></span><br></pre></td></tr></table></figure>
<p><kbd>?&lt;=(aaa)</kbd>表示以”aaa”开始<br><kbd>?=(ccc)</kbd>表示以”ccc”结束</p>
]]></content>
      <categories>
        <category>正则表达式</category>
      </categories>
      <tags>
        <tag>截取字符串</tag>
      </tags>
  </entry>
  <entry>
    <title>combobox模糊匹配</title>
    <url>/2018/08/16/Ext/combobox%E6%A8%A1%E7%B3%8A%E5%8C%B9%E9%85%8D/</url>
    <content><![CDATA[<h1 id="使用本地store加载数据"><a href="#使用本地store加载数据" class="headerlink" title="使用本地store加载数据"></a>使用本地store加载数据</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    xtype: <span class="string">"combobox"</span>,</span><br><span class="line">    itemId: <span class="string">'appointName'</span>,</span><br><span class="line">    margin: <span class="string">'5 5 5 5'</span>,</span><br><span class="line">    emptyText: <span class="string">'请选择'</span>,</span><br><span class="line">    <span class="comment">// editable: false,</span></span><br><span class="line">    fieldLabel: <span class="string">'&lt;span style="color: red"&gt;*&lt;/span&gt;姓名'</span>,</span><br><span class="line">    store: <span class="string">'AppointManStore2'</span>,</span><br><span class="line">    displayField: <span class="string">'realname'</span>,</span><br><span class="line">    valueField: <span class="string">'mobile'</span>,</span><br><span class="line">    allowBlank: <span class="literal">false</span>,</span><br><span class="line">    listeners: &#123;</span><br><span class="line">        beforequery: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> combo = e.combo;</span><br><span class="line">            combo.collapse();</span><br><span class="line">            <span class="keyword">if</span> (!e.forceAll) &#123;</span><br><span class="line">                <span class="keyword">var</span> value = e.query;</span><br><span class="line">                <span class="keyword">if</span> (value != <span class="literal">null</span> &amp;&amp; value != <span class="string">''</span>) &#123;</span><br><span class="line">                    combo.store.filterBy(<span class="function"><span class="keyword">function</span> (<span class="params">record</span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">var</span> text = record.get(combo.displayField);</span><br><span class="line">                        <span class="comment">// 用自己的过滤规则,如写正则式</span></span><br><span class="line">                        <span class="keyword">return</span> (text.indexOf(value) != <span class="number">-1</span>);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    combo.store.clearFilter();</span><br><span class="line">                &#125;</span><br><span class="line">                combo.onLoad();<span class="comment">//不加第一次会显示不出来</span></span><br><span class="line">                combo.expand();</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        select: <span class="function"><span class="keyword">function</span> (<span class="params">combo, record, index</span>) </span>&#123;</span><br><span class="line">            Ext.getCmp(<span class="string">'manualWinId'</span>).down(<span class="string">'#area5'</span>).setValue(<span class="string">''</span>);</span><br><span class="line">            Ext.getCmp(<span class="string">'manualWinId'</span>).down(<span class="string">'#area6'</span>).setValue(<span class="string">''</span>);</span><br><span class="line">            <span class="keyword">var</span> Area2Code = record[<span class="number">0</span>].raw.Area2Code;</span><br><span class="line">            <span class="keyword">var</span> Area3Code = record[<span class="number">0</span>].raw.Area3Code;</span><br><span class="line">            <span class="keyword">if</span> (Area2Code != <span class="string">''</span> &amp;&amp; Area2Code != <span class="string">'0'</span>) &#123;</span><br><span class="line">                Ext.getCmp(<span class="string">'manualWinId'</span>).down(<span class="string">'#area5'</span>).setValue(Area2Code);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (Area3Code != <span class="string">''</span> &amp;&amp; Area3Code != <span class="string">'0'</span>) &#123;</span><br><span class="line">                Ext.getCmp(<span class="string">'manualWinId'</span>).down(<span class="string">'#area6'</span>).setValue(Area3Code);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Ext</category>
      </categories>
      <tags>
        <tag>combobox</tag>
      </tags>
  </entry>
  <entry>
    <title>气泡提示</title>
    <url>/2018/08/16/Ext/%E6%B0%94%E6%B3%A1%E6%8F%90%E7%A4%BA/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    text: <span class="string">'报案号'</span>, <span class="attr">flex</span>: <span class="number">1</span>, <span class="attr">dataIndex</span>: <span class="string">'caseno'</span>, <span class="attr">align</span>: <span class="string">'center'</span>,</span><br><span class="line">    renderer: <span class="function"><span class="keyword">function</span> (<span class="params">value, metaData, record, rowIdx, colIdx, store</span>) </span>&#123;</span><br><span class="line">        metaData.tdAttr = <span class="string">'data-qtip="'</span> + value + <span class="string">'"'</span>;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Ext</category>
      </categories>
      <tags>
        <tag>气泡</tag>
      </tags>
  </entry>
  <entry>
    <title>Dataview的使用</title>
    <url>/2018/08/16/Ext/Dataview%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>利用dataview加载图片列表，使用效果和gridpanel类似，具有分页功能</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    xtype: <span class="string">'dataview'</span>,</span><br><span class="line">    tpl: <span class="keyword">new</span> Ext.XTemplate(</span><br><span class="line">        <span class="string">'&lt;ul style="width:100%;height:100%;background:#fff;" class="picUl clearfix"&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;tpl for="."&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;li&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;tpl if="this.isPic(values.filetype)==true"&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;img src="&#123;[values.filepath]&#125;" /&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;/tpl&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;tpl if="this.isPic(values.filetype)==false"&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;video src="&#123;[values.filepath]&#125;" controls="controls"&gt;&lt;/video&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;/tpl&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;div class="picUl_op clearfix"&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;input type="checkbox" name="file" value="&#123;[values.id]&#125;"/&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;span&gt;&#123;[this.handleName(values.filename)]&#125;&lt;/span&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;a download="&#123;[values.filename]&#125;" href="&#123;[values.filepath]&#125;" target="_blank"&gt;下载&lt;/a&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;/div&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;/li&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;/tpl&gt;'</span>,</span><br><span class="line">        <span class="string">'&lt;/ul&gt;'</span>,</span><br><span class="line">        &#123;</span><br><span class="line">            isPic: <span class="function"><span class="keyword">function</span>(<span class="params">type</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(type == <span class="string">'pic'</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            handleName: <span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> value.replace(<span class="regexp">/^(^.&#123;20&#125;)(.+)(.&#123;2&#125;\.+\w+$)$/g</span>, <span class="string">"$1...$3"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ),</span><br><span class="line">    store: <span class="string">'UnRelateFileStore'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Ext</category>
      </categories>
      <tags>
        <tag>dataview</tag>
      </tags>
  </entry>
  <entry>
    <title>base64保存图片</title>
    <url>/2018/08/16/Node/base64%E4%BF%9D%E5%AD%98%E5%9B%BE%E7%89%87/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">uploadPic: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> Me = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">var</span> imgData = Me.req.body.base64;</span><br><span class="line">    <span class="keyword">var</span> topic = Me.req.body.topic;</span><br><span class="line">    <span class="keyword">var</span> base64Data = imgData.replace(<span class="regexp">/^data:image\/\w+;base64,/</span>, <span class="string">""</span>);</span><br><span class="line">    <span class="keyword">var</span> dataBuffer = <span class="keyword">new</span> Buffer(base64Data, <span class="string">'base64'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> now = hcUti.formatDate(<span class="keyword">new</span> <span class="built_in">Date</span>(), <span class="string">'yyyy/MM/dd'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> filePath = <span class="string">'./web/upload/'</span> + now + <span class="string">'/'</span> + topic + <span class="string">'/'</span>;</span><br><span class="line">    <span class="keyword">var</span> fullPath = <span class="string">'./web/upload/'</span> + now + <span class="string">'/'</span> + topic + <span class="string">'/'</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().getTime() + <span class="string">'.jpg'</span>;</span><br><span class="line">    <span class="keyword">var</span> f = <span class="keyword">new</span> _File();</span><br><span class="line">    f.createFile(dataBuffer, filePath, fullPath, <span class="function"><span class="keyword">function</span> (<span class="params">err, result</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'err'</span>, err)</span><br><span class="line">            <span class="keyword">return</span> cbError(<span class="number">50003</span>, Me.cb);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Me.cb(<span class="number">200</span>, <span class="string">""</span>, fullPath);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Node</category>
      </categories>
      <tags>
        <tag>base64</tag>
      </tags>
  </entry>
  <entry>
    <title>先根遍历文件夹</title>
    <url>/2018/08/16/Node/%E5%85%88%E6%A0%B9%E9%81%8D%E5%8E%86%E6%96%87%E4%BB%B6%E5%A4%B9/</url>
    <content><![CDATA[<h1 id="遍历结束后执行回调函数"><a href="#遍历结束后执行回调函数" class="headerlink" title="遍历结束后执行回调函数"></a>遍历结束后执行回调函数</h1><p>每个文件或文件夹会遍历一次，遍历的总次数为文件和文件夹的和，遍历一次数量减1，为0时表示遍历结束，可以执行回调函数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//根据树的遍历的原理遍历文件夹，先根遍历</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">var</span> path = <span class="string">'web/js'</span>;</span><br><span class="line"><span class="keyword">var</span> len = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> picstr = <span class="string">''</span>;</span><br><span class="line">explorer(path, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'picstr:'</span>, picstr);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">explorer</span>(<span class="params">path, callback</span>) </span>&#123;</span><br><span class="line">    fs.readdir(path, <span class="function"><span class="keyword">function</span> (<span class="params">err, files</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//err 为错误 , files 文件名列表包含文件夹与文件</span></span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'error:\n'</span> + err);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        len += files.length;</span><br><span class="line">        files.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">file</span>) </span>&#123;</span><br><span class="line">            fs.stat(path + <span class="string">'/'</span> + file, <span class="function"><span class="keyword">function</span> (<span class="params">err, stat</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (err) &#123; <span class="built_in">console</span>.log(err); <span class="keyword">return</span>; &#125;</span><br><span class="line">                <span class="keyword">if</span> (stat.isDirectory()) &#123;</span><br><span class="line">                    <span class="comment">// 如果是文件夹遍历</span></span><br><span class="line">                    explorer(path + <span class="string">'/'</span> + file, callback);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// 读出所有的文件</span></span><br><span class="line">                    len--;</span><br><span class="line">                    picstr += path + <span class="string">'/'</span> + file + <span class="string">'*'</span>;                    </span><br><span class="line">                    <span class="keyword">if</span>(len == <span class="number">0</span>)&#123;</span><br><span class="line">                        callback()</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;)</span><br><span class="line">        len--;</span><br><span class="line">        <span class="keyword">if</span>(len == <span class="number">0</span>)&#123;</span><br><span class="line">            callback()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Node</category>
      </categories>
      <tags>
        <tag>fs</tag>
      </tags>
  </entry>
  <entry>
    <title>table表头固定</title>
    <url>/2018/10/22/H5/table%E8%A1%A8%E5%A4%B4%E5%9B%BA%E5%AE%9A/</url>
    <content><![CDATA[<p>实现表头固定，内容滚动</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width: 100%;height: 400px;background: #fff;overflow-y: auto;position: relative;"</span> <span class="attr">id</span>=<span class="string">"table-cont"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span>...<span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> tableCont = <span class="built_in">document</span>.querySelector(<span class="string">'#table-cont'</span>);</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">scrollHandle</span> (<span class="params">e</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> scrollTop = <span class="keyword">this</span>.scrollTop;</span><br><span class="line">        <span class="keyword">this</span>.querySelector(<span class="string">'thead'</span>).style.transform = <span class="string">'translateY('</span> + scrollTop + <span class="string">'px)'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    tableCont.addEventListener(<span class="string">'scroll'</span>,scrollHandle);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>H5</category>
      </categories>
      <tags>
        <tag>table</tag>
      </tags>
  </entry>
  <entry>
    <title>css伪类实现同心圆</title>
    <url>/2018/08/31/H5/css%E4%BC%AA%E7%B1%BB%E5%AE%9E%E7%8E%B0%E5%90%8C%E5%BF%83%E5%9C%86/</url>
    <content><![CDATA[<p>主要用到了css属性 background-clip 实现效果</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>流程图<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">		*&#123;</span></span><br><span class="line"><span class="undefined">			margin: 0;</span></span><br><span class="line"><span class="undefined">			padding: 0;</span></span><br><span class="line"><span class="undefined">			font-size: 16px;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">		.wrapper&#123;</span></span><br><span class="line"><span class="undefined">			margin: 10px;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">		.status&#123;</span></span><br><span class="line"><span class="undefined">			margin-left: 40px;</span></span><br><span class="line"><span class="undefined">			position: relative;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">		.status:before&#123;</span></span><br><span class="line"><span class="undefined">			content: '';</span></span><br><span class="line"><span class="undefined">			position: absolute;</span></span><br><span class="line"><span class="undefined">			display: block;</span></span><br><span class="line"><span class="undefined">			left: -33px;</span></span><br><span class="line"><span class="undefined">			top: 1px;</span></span><br><span class="line"><span class="undefined">			width: 16px;</span></span><br><span class="line"><span class="undefined">			height: 16px;</span></span><br><span class="line"><span class="undefined">			padding: 2px;</span></span><br><span class="line"><span class="undefined">			border-radius: 50%;</span></span><br><span class="line"><span class="undefined">			background: #000;</span></span><br><span class="line"><span class="undefined">			border: 1px solid #000;</span></span><br><span class="line"><span class="undefined">			background-clip:content-box;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">		.step&#123;</span></span><br><span class="line"><span class="undefined">			line-height: 1.6;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">		.time&#123;</span></span><br><span class="line"><span class="undefined">			margin-left: 92px;</span></span><br><span class="line"><span class="undefined">			box-sizing: border-box;</span></span><br><span class="line"><span class="undefined">			position: relative;</span></span><br><span class="line"><span class="undefined">			color: #40B2D9;</span></span><br><span class="line"><span class="undefined">			height: 25px;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">		.time:before&#123;</span></span><br><span class="line"><span class="undefined">			content: '';</span></span><br><span class="line"><span class="undefined">			position: absolute;</span></span><br><span class="line"><span class="undefined">			display: block;</span></span><br><span class="line"><span class="undefined">			left: -21.5px;</span></span><br><span class="line"><span class="undefined">			top: -1px;</span></span><br><span class="line"><span class="undefined">			width: 1px;</span></span><br><span class="line"><span class="undefined">			height: 29px;</span></span><br><span class="line"><span class="undefined">			background: #000;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">		.text&#123;</span></span><br><span class="line"><span class="undefined">			display: inline-block;</span></span><br><span class="line"><span class="undefined">			width: 48px;</span></span><br><span class="line"><span class="undefined">			text-align: right;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">		.margingp&#123;</span></span><br><span class="line"><span class="undefined">			margin-left: 92px;</span></span><br><span class="line"><span class="undefined">			box-sizing: border-box;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">		.aaa&#123;</span></span><br><span class="line"><span class="undefined">			margin-left: 92px;</span></span><br><span class="line"><span class="undefined">			box-sizing: border-box;</span></span><br><span class="line"><span class="undefined">			position: relative;</span></span><br><span class="line"><span class="undefined">			color: #40B2D9;</span></span><br><span class="line"><span class="undefined">			height: 25px;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">		.aaa::before&#123;</span></span><br><span class="line"><span class="undefined">			content: '';</span></span><br><span class="line"><span class="undefined">			position: absolute;</span></span><br><span class="line"><span class="undefined">			display: block;</span></span><br><span class="line"><span class="undefined">			left: 100px;</span></span><br><span class="line"><span class="undefined">			top: -1px;</span></span><br><span class="line"><span class="undefined">			width: 50px;</span></span><br><span class="line"><span class="undefined">			height: 50px;</span></span><br><span class="line"><span class="undefined">			border-radius: 50%;</span></span><br><span class="line"><span class="undefined">			background: #000;</span></span><br><span class="line"><span class="undefined">			background-clip:content-box;</span></span><br><span class="line"><span class="undefined">			border: 1px solid red;</span></span><br><span class="line"><span class="undefined">			padding: 50px;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"step"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>待查勘<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"status"</span>&gt;</span>查勘任务派发：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span>&gt;</span>2017-09-27 09:43<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>历时：<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>1小时52分钟<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"step"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>查勘中<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"status"</span>&gt;</span>出发：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span>&gt;</span>2017-09-27 09:43<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>历时：<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>1小时52分钟<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"step"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"status"</span>&gt;</span>到达：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span>&gt;</span>2017-09-27 09:43<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>历时：<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>1小时52分钟<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"step"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"status"</span>&gt;</span>撤离：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span>&gt;</span>2017-09-27 09:43<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>历时：<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>1小时52分钟<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"step"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>已查勘<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"status"</span>&gt;</span>已查勘：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span>&gt;</span>2017-09-27 09:43<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"step"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>定损<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"status"</span>&gt;</span>定损任务派发：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span>&gt;</span>2017-09-27 09:43<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"margingp"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>定损任务领取：<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>2017-09-27 09:43<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"margingp"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>已定损：<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>2017-09-27 09:43<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>H5</category>
      </categories>
      <tags>
        <tag>background-clip</tag>
        <tag>before</tag>
      </tags>
  </entry>
  <entry>
    <title>浏览器实现全屏</title>
    <url>/2018/09/14/H5/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AE%9E%E7%8E%B0%E5%85%A8%E5%B1%8F/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FullScreen</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> isFullscreen = <span class="built_in">document</span>.fullScreen || <span class="built_in">document</span>.mozFullScreen || <span class="built_in">document</span>.webkitIsFullScreen;</span><br><span class="line">    <span class="keyword">if</span>(!isFullscreen) &#123; <span class="comment">//进入全屏,多重短路表达式</span></span><br><span class="line">        (el.requestFullscreen &amp;&amp; el.requestFullscreen()) ||</span><br><span class="line">        (el.mozRequestFullScreen &amp;&amp; el.mozRequestFullScreen()) ||</span><br><span class="line">        (el.webkitRequestFullscreen &amp;&amp; el.webkitRequestFullscreen()) || (el.msRequestFullscreen &amp;&amp; el.msRequestFullscreen());</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; <span class="comment">//退出全屏,三目运算符</span></span><br><span class="line">        <span class="built_in">document</span>.exitFullscreen ? <span class="built_in">document</span>.exitFullscreen() :</span><br><span class="line">            <span class="built_in">document</span>.mozCancelFullScreen ? <span class="built_in">document</span>.mozCancelFullScreen() :</span><br><span class="line">            <span class="built_in">document</span>.webkitExitFullscreen ? <span class="built_in">document</span>.webkitExitFullscreen() : <span class="string">''</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>H5</category>
      </categories>
      <tags>
        <tag>浏览器</tag>
        <tag>全屏</tag>
      </tags>
  </entry>
  <entry>
    <title>桌面通知</title>
    <url>/2018/09/04/H5/%E6%A1%8C%E9%9D%A2%E9%80%9A%E7%9F%A5/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 仅支持https服务</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showNotice</span>(<span class="params"></span>) </span>&#123;   </span><br><span class="line">    Notification.requestPermission(<span class="function"><span class="keyword">function</span> (<span class="params">perm</span>) </span>&#123; </span><br><span class="line">        <span class="keyword">debugger</span> </span><br><span class="line">        <span class="keyword">if</span> (perm == <span class="string">"granted"</span>) &#123;  </span><br><span class="line">            <span class="keyword">var</span> notification = <span class="keyword">new</span> Notification(<span class="string">"这是一个通知撒:"</span>, &#123;  </span><br><span class="line">                dir: <span class="string">"auto"</span>,  </span><br><span class="line">                lang: <span class="string">"hi"</span>,  </span><br><span class="line">                tag: <span class="string">"testTag"</span>,  </span><br><span class="line">                icon: <span class="string">"https://static.cnblogs.com/images/adminlogo.gif"</span>,  </span><br><span class="line">                body: <span class="string">"通知content"</span>  </span><br><span class="line">            &#125;);  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;)  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>H5</category>
      </categories>
      <tags>
        <tag>notify</tag>
      </tags>
  </entry>
  <entry>
    <title>禁止浏览器返回</title>
    <url>/2018/10/19/H5/%E7%A6%81%E6%AD%A2%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BF%94%E5%9B%9E/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//防止页面后退 </span></span><br><span class="line">history.pushState(<span class="literal">null</span>, <span class="literal">null</span>, <span class="built_in">document</span>.URL); </span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'popstate'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">    history.pushState(<span class="literal">null</span>, <span class="literal">null</span>, <span class="built_in">document</span>.URL);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>H5</category>
      </categories>
      <tags>
        <tag>禁止浏览器返回</tag>
      </tags>
  </entry>
  <entry>
    <title>video视频截图</title>
    <url>/2018/08/16/H5/video%E8%A7%86%E9%A2%91%E6%88%AA%E5%9B%BE/</url>
    <content><![CDATA[<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://libs.baidu.com/jquery/2.0.0/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">video</span> <span class="attr">width</span>=<span class="string">"800"</span> <span class="attr">height</span>=<span class="string">"600"</span> <span class="attr">controls</span>=<span class="string">"controls"</span> <span class="attr">id</span>=<span class="string">"video"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"img/1.mp4"</span> <span class="attr">type</span>=<span class="string">"video/mp4"</span>&gt;</span><span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">			当前浏览器不支持 video标签</span><br><span class="line">		<span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"截图"</span> <span class="attr">id</span>=<span class="string">"camera"</span> /&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"image"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">	$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">		$(<span class="string">"#camera"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">			camera();</span></span><br><span class="line"><span class="undefined">		&#125;)</span></span><br><span class="line"><span class="undefined">	&#125;)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">	<span class="function"><span class="keyword">function</span> <span class="title">camera</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> video = <span class="built_in">document</span>.getElementById(<span class="string">"video"</span>);</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> width = <span class="number">400</span>;</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> height = <span class="number">300</span>;</span></span><br><span class="line"><span class="undefined">		canvas.width = width;</span></span><br><span class="line"><span class="undefined">		canvas.height = height;</span></span><br><span class="line"><span class="undefined">		ctx.drawImage(video, 0, 0, width, height);</span></span><br><span class="line"><span class="javascript">		<span class="keyword">var</span> images = canvas.toDataURL(<span class="string">'image/png'</span>);</span></span><br><span class="line"><span class="javascript">		$(<span class="string">"#image"</span>).attr(<span class="string">'src'</span>, images);</span></span><br><span class="line"><span class="undefined">	&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>H5</category>
      </categories>
      <tags>
        <tag>video</tag>
      </tags>
  </entry>
  <entry>
    <title>GridPanel翻页勾选记录</title>
    <url>/2018/08/16/Ext/GridPanel%E7%BF%BB%E9%A1%B5%E5%8B%BE%E9%80%89%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<p>gridpanel的列表在翻页后，前后的勾选会自动取消，可以避免出现这种情况</p>
<a id="more"></a>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 已关联案件</span></span><br><span class="line">Ext.define(<span class="string">'WebSystem.view.UnRelateFileGridPanel'</span>, &#123;</span><br><span class="line">    extend: <span class="string">'Ext.grid.Panel'</span>,</span><br><span class="line">    id: <span class="string">'unRelateFileGridPanelId'</span>,</span><br><span class="line">    xtype: <span class="string">'unRelateFileGridPanel'</span>,</span><br><span class="line">    enableColumnMove: <span class="literal">false</span>,</span><br><span class="line">    store: <span class="string">'UnRelateFileStore'</span>,</span><br><span class="line">    viewConfig: &#123;</span><br><span class="line">        forceFit: <span class="literal">true</span>,</span><br><span class="line">        loadMask: <span class="literal">false</span>,</span><br><span class="line">        enableTextSelection:<span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    border: <span class="literal">false</span>,</span><br><span class="line">    initComponent: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        Ext.apply(<span class="keyword">this</span>, &#123;</span><br><span class="line">            selModel: &#123;</span><br><span class="line">                injectCheckbox: <span class="number">0</span>,</span><br><span class="line">                mode: <span class="string">"SIMPLE"</span>,     <span class="comment">//"SINGLE"/"SIMPLE"/"MULTI"</span></span><br><span class="line">                checkOnly: <span class="literal">true</span>,   <span class="comment">//只能通过checkbox选择</span></span><br><span class="line">                pruneRemoved: <span class="literal">false</span>,</span><br><span class="line">                onHeaderClick: <span class="function"><span class="keyword">function</span> (<span class="params">headerCt, header, e</span>) </span>&#123;</span><br><span class="line">                    isChecked = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">if</span> (header.isCheckerHd) &#123;</span><br><span class="line">                        e.stopEvent();</span><br><span class="line">                        <span class="keyword">var</span> me = <span class="keyword">this</span>,</span><br><span class="line">                            isChecked = header.el.hasCls(Ext.baseCSSPrefix + <span class="string">'grid-hd-checker-on'</span>);</span><br><span class="line">                        me.preventFocus = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">if</span> (isChecked) &#123;</span><br><span class="line">                            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.store.data.items.length; i++) &#123;</span><br><span class="line">                                <span class="keyword">this</span>.deselect(<span class="keyword">this</span>.store.data.getAt(i), <span class="literal">null</span>);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            me.selectAll();</span><br><span class="line">                            header.el.addCls(Ext.baseCSSPrefix + <span class="string">'grid-hd-checker-on'</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">delete</span> me.preventFocus;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            selType: <span class="string">"checkboxmodel"</span>,</span><br><span class="line">            columns: [</span><br><span class="line">                &#123; <span class="attr">header</span>: <span class="string">'序号'</span>, <span class="attr">xtype</span>: <span class="string">'rownumberer'</span>, <span class="attr">width</span>: <span class="number">60</span>, <span class="attr">align</span>: <span class="string">'center'</span> &#125;,</span><br><span class="line">                &#123; <span class="attr">text</span>: <span class="string">'文件名'</span>, <span class="attr">flex</span>: <span class="number">1</span>, <span class="attr">dataIndex</span>: <span class="string">'filename'</span>, <span class="attr">align</span>: <span class="string">'center'</span> &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    text: <span class="string">'上传时间'</span>, <span class="attr">flex</span>: <span class="number">1</span>, <span class="attr">dataIndex</span>: <span class="string">'uploadtime'</span>, <span class="attr">align</span>: <span class="string">'center'</span>,</span><br><span class="line">                    renderer: <span class="function"><span class="keyword">function</span> (<span class="params">value, metaData, record, rowIdx, colIdx, store</span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">var</span> _str = <span class="string">''</span>;</span><br><span class="line">                        _str = formatDate(<span class="keyword">new</span> <span class="built_in">Date</span>(value * <span class="number">1</span>), <span class="string">'yyyy-MM-dd hh:mm:ss'</span>);</span><br><span class="line">                        <span class="keyword">return</span> _str;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    text: <span class="string">'操作'</span>, <span class="attr">flex</span>: <span class="number">1</span>, <span class="attr">dataIndex</span>: <span class="string">'operate'</span>, <span class="attr">itemId</span>: <span class="string">'operate'</span>, <span class="attr">align</span>: <span class="string">'center'</span>,</span><br><span class="line">                    renderer: <span class="function"><span class="keyword">function</span> (<span class="params">value, metaData, record, rowIdx, colIdx, store</span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">var</span> str1 = <span class="string">''</span>;</span><br><span class="line">                        <span class="keyword">var</span> str2 = <span class="string">''</span>;</span><br><span class="line">                        str1 = <span class="string">"&lt;button type='button' id='preview' class='btnGridContr'&gt;预览&lt;/button&gt; "</span>;</span><br><span class="line">                        <span class="comment">// str2 = "&lt;button type='button' id='relate' class='btnGridContr' style='width:70px;'&gt;关联案件&lt;/button&gt; ";</span></span><br><span class="line">                        <span class="keyword">return</span> str1 + str2;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">this</span>.callParent(<span class="built_in">arguments</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Ext</category>
      </categories>
      <tags>
        <tag>gridpanel</tag>
      </tags>
  </entry>
  <entry>
    <title>base64转blob对象</title>
    <url>/2018/09/19/Javascript/base64%E8%BD%ACblob%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dataURItoBlob</span>(<span class="params">base64Data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> byteString;</span><br><span class="line">    <span class="keyword">if</span>(base64Data.split(<span class="string">','</span>)[<span class="number">0</span>].indexOf(<span class="string">'base64'</span>) &gt;= <span class="number">0</span>)</span><br><span class="line">        byteString = atob(base64Data.split(<span class="string">','</span>)[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        byteString = <span class="built_in">unescape</span>(base64Data.split(<span class="string">','</span>)[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">var</span> mimeString = base64Data.split(<span class="string">','</span>)[<span class="number">0</span>].split(<span class="string">':'</span>)[<span class="number">1</span>].split(<span class="string">';'</span>)[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> ia = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(byteString.length);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; byteString.length; i++) &#123;</span><br><span class="line">        ia[i] = byteString.charCodeAt(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Blob([ia], &#123;</span><br><span class="line">        type: mimeString</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>base64</tag>
        <tag>blob</tag>
      </tags>
  </entry>
  <entry>
    <title>Gogs</title>
    <url>/2018/04/12/Other/Gogs/</url>
    <content><![CDATA[<h1 id="新建仓库"><a href="#新建仓库" class="headerlink" title="新建仓库"></a>新建仓库</h1><a id="more"></a>
<p><img src="/images/20180412/1523503660708.png" alt="image"></p>
<h1 id="初始化本地仓库"><a href="#初始化本地仓库" class="headerlink" title="初始化本地仓库"></a>初始化本地仓库</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>
<h1 id="添加要push到远程仓库的文件或文件夹-表示全部文件"><a href="#添加要push到远程仓库的文件或文件夹-表示全部文件" class="headerlink" title="添加要push到远程仓库的文件或文件夹(*表示全部文件)"></a>添加要push到远程仓库的文件或文件夹(*表示全部文件)</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add *</span><br></pre></td></tr></table></figure>
<h1 id="将代码提交到本地仓库并填写备注信息"><a href="#将代码提交到本地仓库并填写备注信息" class="headerlink" title="将代码提交到本地仓库并填写备注信息"></a>将代码提交到本地仓库并填写备注信息</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git commit -m xxx</span><br></pre></td></tr></table></figure>
<h1 id="建立与远程仓库的连接"><a href="#建立与远程仓库的连接" class="headerlink" title="建立与远程仓库的连接"></a>建立与远程仓库的连接</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git remote add origin http://192.168.1.50:10080/liuzhiyong/wyc.git</span><br></pre></td></tr></table></figure>
<h1 id="拉取并合并代码"><a href="#拉取并合并代码" class="headerlink" title="拉取并合并代码"></a>拉取并合并代码</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git pull --rebase origin master</span><br></pre></td></tr></table></figure>
<h1 id="将本地仓库push到远程仓库"><a href="#将本地仓库push到远程仓库" class="headerlink" title="将本地仓库push到远程仓库"></a>将本地仓库push到远程仓库</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Gogs</category>
      </categories>
      <tags>
        <tag>Gogs</tag>
      </tags>
  </entry>
  <entry>
    <title>获取本地图片</title>
    <url>/2018/08/16/H5/%E8%8E%B7%E5%8F%96%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/</url>
    <content><![CDATA[<p>读取本地图片，拍照或者读取相册，兼容android，ios</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>手机端通信<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-1.8.2.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    请选取一个图像文件:</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"file"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> u = navigator.userAgent;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> isiOS = !!u.match(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (isiOS) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">'file'</span>).removeAttribute(<span class="string">"capture"</span>, <span class="string">"camera"</span>);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">ProcessFile</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> file = <span class="built_in">document</span>.getElementById(<span class="string">'file'</span>).files[<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (file) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader();</span></span><br><span class="line"><span class="javascript">            reader.onload = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> txt = event.target.result;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</span></span><br><span class="line"><span class="javascript">                img.src = txt;<span class="comment">//将图片base64字符串赋值给img的src</span></span></span><br><span class="line"><span class="undefined">                alert(txt);</span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        reader.readAsDataURL(file);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">contentLoaded</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.getElementById(<span class="string">'file'</span>).addEventListener(<span class="string">'change'</span>, ProcessFile, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.addEventListener(<span class="string">"DOMContentLoaded"</span>, contentLoaded, <span class="literal">false</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>H5</category>
      </categories>
      <tags>
        <tag>file</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo+Github搭建个人博客</title>
    <url>/2018/04/12/Other/Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
    <content><![CDATA[<h1 id="搭建准备"><a href="#搭建准备" class="headerlink" title="搭建准备"></a>搭建准备</h1><a id="more"></a>
<ul>
<li>node.js 的安装与准备</li>
<li>git 的安装与准备</li>
<li>github 账户的配置</li>
</ul>
<h1 id="安装-node-js-环境"><a href="#安装-node-js-环境" class="headerlink" title="安装 node.js 环境"></a>安装 node.js 环境</h1><p><a href="https://nodejs.org/en/" target="_blank" rel="noopener">node.js下载地址</a></p>
<h1 id="安装-git-环境"><a href="#安装-git-环境" class="headerlink" title="安装 git 环境"></a>安装 git 环境</h1><p><a href="https://git-scm.com/downloads" target="_blank" rel="noopener">git下载地址</a></p>
<h1 id="github-账户的注册与配置"><a href="#github-账户的注册与配置" class="headerlink" title="github 账户的注册与配置"></a>github 账户的注册与配置</h1><ol>
<li>到<a href="https://github.com/" target="_blank" rel="noopener">官网</a>注册 github 账户</li>
<li>创建仓库</li>
</ol>
<p>如果你的 github 名称是 imlzyong，那么你的仓库名称需填写为 imlzyong.github.io</p>
<p><img src="/images/20180412/1523515450151.png" alt="image"></p>
<ol start="3">
<li>开启 github pages 功能</li>
</ol>
<p>打开右侧的 Settings，找到 Github Pages 并开启此功能</p>
<p><img src="/images/20180412/1523515691966.png" alt="image"></p>
<p>如果开启成功，你将会看到以下描述</p>
<p><img src="/images/20180412/1523515813005.png" alt="image"></p>
<h1 id="安装-hexo"><a href="#安装-hexo" class="headerlink" title="安装 hexo"></a>安装 hexo</h1><p>新建一个文件夹，在该文件夹命令行中输入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure>
<p>执行结束后，继续输入：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure>
<p>如果你看到了如图文字，则说明已经安装成功了</p>
<p><img src="/images/20180412/1523516052334.png" alt="image"></p>
<h1 id="hexo-的相关配置"><a href="#hexo-的相关配置" class="headerlink" title="hexo 的相关配置"></a>hexo 的相关配置</h1><p>初始化 hexo</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure>
<p>安装所需要的插件，不要使用淘宝镜像进行安装，因为引用的方式不同会出现问题</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>启动 hexo 的本地服务</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<p>在浏览器中打开 <a href="http://localhost:4000/" target="_blank" rel="noopener">http://localhost:4000/</a> ，你将会看到：</p>
<p><img src="/images/20180412/1523516534781.jpg" alt="image"></p>
<p>到目前为止，hexo 在本地的配置已经全都结束了</p>
<h1 id="将-hexo-与-GitHub-Pages-联系起来"><a href="#将-hexo-与-GitHub-Pages-联系起来" class="headerlink" title="将 hexo 与 GitHub Pages 联系起来"></a>将 hexo 与 GitHub Pages 联系起来</h1><h2 id="配置-git-个人信息"><a href="#配置-git-个人信息" class="headerlink" title="配置 git 个人信息"></a>配置 git 个人信息</h2><ol>
<li>设置 git 的 name 和 email</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git config --global user.name imlzyong</span><br><span class="line">git config --global user.email imlzyong@163.com</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>生成密钥</li>
</ol>
<p>如果不需要密码，可以直接3个回车即可</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C imlzyong@163.com</span><br></pre></td></tr></table></figure>
<p>最后得到了两个文件：id_rsa和id_rsa.pub，默认的存储路径是：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">C:\Users\Administrator\.ssh</span><br></pre></td></tr></table></figure>
<h2 id="配置-Deployment"><a href="#配置-Deployment" class="headerlink" title="配置 Deployment"></a>配置 Deployment</h2><p>安装扩展</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>在文件根目录的 _config.yml (站点配置文件)文件中，找到Deployment，然后按照如下修改：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:yourname/yourname.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>比如我的仓库的地址是<a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:imlzyong/imlzyong.github.io.git，所以配置如下</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:imlzyong/imlzyong.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<h1 id="写博客、发布文章"><a href="#写博客、发布文章" class="headerlink" title="写博客、发布文章"></a>写博客、发布文章</h1><p>新建一篇博客，执行下面的命令：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo new post article</span><br></pre></td></tr></table></figure>
<p>这时候在目录 source\ _posts 将会看到 article.md 文件，文章编辑好之后，运行生成、部署命令：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo g   // 生成</span><br><span class="line">hexo d   // 部署</span><br></pre></td></tr></table></figure>
<p>当然你也可以执行下面的命令，相当于上面两条命令的效果</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo d -g   // 在部署前先生成</span><br></pre></td></tr></table></figure>
<p>部署成功后访问你的地址，<a href="https://yourName.github.io" target="_blank" rel="noopener">https://yourName.github.io</a> （这里输入我的地址：<a href="https://imlzyong.github.io" target="_blank" rel="noopener">https://imlzyong.github.io</a> ),将可以看到生成的文章</p>
<p>如果出现以下错误：</p>
<blockquote>
<p>Permission denied (publickey).<br>fatal: Could not read from remote repository.<br>Please make sure you have the correct access rights and the repository exists.</p>
</blockquote>
<p>需要在 github 中添加 ssh（将之前生成的 id_rsa.pub 中的内容复制到 GitHub）</p>
<p><img src="/images/20180412/1523518377804.png" alt="image"></p>
<p><img src="/images/20180412/1523518653483.png" alt="image"></p>
<p>输入命令测试是否成功：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>
<p>你将会看到：</p>
<blockquote>
<p>Hi imlzyong! You’ve successfully authenticated, but GitHub does not provide shell access.</p>
</blockquote>
<p>如果你看到Hi后面是你的用户名，就说明成功了。</p>
<h1 id="主题推荐及配置，源码地址"><a href="#主题推荐及配置，源码地址" class="headerlink" title="主题推荐及配置，源码地址"></a>主题推荐及配置，源码地址</h1><p><a href="http://theme-next.iissnan.com/" target="_blank" rel="noopener">next 主题</a></p>
<p><a href="https://github.com/liuzhiyong94/hexo" target="_blank" rel="noopener">项目源码</a></p>
<p><a href="https://github.com/liuzhiyong94/liuzhiyong94.github.io" target="_blank" rel="noopener">部署代码</a></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>box-shadow常用值</title>
    <url>/2018/08/16/H5/box-shadow%E5%B8%B8%E7%94%A8%E5%80%BC/</url>
    <content><![CDATA[<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">4px</span> <span class="number">4px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(0, 0, 0, 0.2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>H5</category>
      </categories>
      <tags>
        <tag>box-shadow</tag>
      </tags>
  </entry>
  <entry>
    <title>父页面调用frame中的函数</title>
    <url>/2018/08/23/H5/%E7%88%B6%E9%A1%B5%E9%9D%A2%E8%B0%83%E7%94%A8frame%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">parent.window.frames[<span class="number">0</span>].frameElement.contentWindow.Fun()</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>H5</category>
      </categories>
      <tags>
        <tag>iframe</tag>
      </tags>
  </entry>
  <entry>
    <title>webpack初学</title>
    <url>/2018/04/11/Webpack/webpack%E5%88%9D%E5%AD%A6/</url>
    <content><![CDATA[<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><a id="more"></a>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">//全局安装</span><br><span class="line">npm install -g webpack</span><br><span class="line">//安装到项目目录  </span><br><span class="line">npm install --save-dev webpack</span><br></pre></td></tr></table></figure>
<h1 id="使用webpack前的准备"><a href="#使用webpack前的准备" class="headerlink" title="使用webpack前的准备"></a>使用webpack前的准备</h1><p>创建 package.json 文件，这是又一个标准的 npm 说明文件，使用 npm init 命令可以自动创建这个文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>
<p>在全局安装webpack作为依赖包</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">//安装webpack  </span><br><span class="line">npm install -g webpack</span><br></pre></td></tr></table></figure>
<p>项目目录结构(secondary.js应该为greeter.js)</p>
<p><img src="/images/20180411/1523438804892.png" alt="image"></p>
<p>index.html 主要是为了引入打包后的 js 文件，这里我们默认打包后的 js 文件为 bundle.js</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- index.html --&gt;</span> </span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>greeter.js 定义一个返回包含问候信息的html元素的函数,并导出这个函数为一个模块</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//greeter.js  </span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </span><br><span class="line">  <span class="keyword">var</span> greet = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);  </span><br><span class="line">  greet.textContent = <span class="string">"hello webpack"</span>;  </span><br><span class="line">  <span class="keyword">return</span> greet;  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>main.js 为主 js 文件</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//main.js  </span></span><br><span class="line"><span class="keyword">var</span> greeter = <span class="built_in">require</span>(<span class="string">'./greeter.js'</span>);  </span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">"#root"</span>).appendChild(greeter());</span><br></pre></td></tr></table></figure>
<h1 id="通过设置配置文件来使用webpack"><a href="#通过设置配置文件来使用webpack" class="headerlink" title="通过设置配置文件来使用webpack"></a>通过设置配置文件来使用webpack</h1><p>在项目的根目录下新建一个名为 webpack.config.js 的文件，并写好配置信息（文件名不能修改）</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;  </span><br><span class="line">    entry: __dirname + <span class="string">"/app/main.js"</span>,<span class="comment">//唯一入口文件  </span></span><br><span class="line">    output: &#123;  </span><br><span class="line">        path: __dirname + <span class="string">"/public"</span>,<span class="comment">//打包后的文件存放的地方  </span></span><br><span class="line">        filename: <span class="string">"bundle.js"</span><span class="comment">//打包后输出文件的文件名  </span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后只需要在终端下运行 webpack 命令实现打包操作，运行结果如下表示打包成功</p>
<p><img src="/images/20180411/1523438925658.png" alt="image"></p>
<p>可以看到 public 目录中多了一个文件 bundle.js ，即为打包后的文件</p>
<p><img src="/images/20180411/1523438971641.png" alt="image"></p>
<h1 id="关于打包时的警告问题"><a href="#关于打包时的警告问题" class="headerlink" title="关于打包时的警告问题"></a>关于打包时的警告问题</h1><p>webpack 更新到 4.0.0 后，必须在“开发或者生产”模式中选择一种模式</p>
<p>有2种解决办法：</p>
<p>1、在执行打包命令时带入模式</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">webpack --mode development</span><br><span class="line">webpack --mode production</span><br></pre></td></tr></table></figure>
<p>2、在 package.json 文件中加入引导</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;  </span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"webpack"</span>,  </span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,  </span><br><span class="line">  <span class="string">"description"</span>: <span class="string">""</span>,  </span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"index.js"</span>,  </span><br><span class="line">  <span class="string">"scripts"</span>: &#123;  </span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,  </span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"webpack --mode development"</span>,  </span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"webpack --mode production"</span>  </span><br><span class="line">  &#125;,  </span><br><span class="line">  <span class="string">"author"</span>: <span class="string">""</span>,  </span><br><span class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span>,  </span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;  </span><br><span class="line">    <span class="string">"webpack"</span>: <span class="string">"^4.2.0"</span>,  </span><br><span class="line">    <span class="string">"webpack-cli"</span>: <span class="string">"^2.0.13"</span>  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在终端执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>可以看到执行结果也是成功的</p>
<p><img src="/images/20180411/1523439012826.png" alt="image"></p>
<h1 id="使用-webpack-构建本地服务器"><a href="#使用-webpack-构建本地服务器" class="headerlink" title="使用 webpack 构建本地服务器"></a>使用 webpack 构建本地服务器</h1><p>想使用 webpack 构建本地服务器，需要独立安装 webpack-dev-server 作为依赖</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm  install --save-dev webpack-dev-server</span><br></pre></td></tr></table></figure>
<p>在 webpack.config.js 中添加相应的配置信息</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;  </span><br><span class="line">    entry: __dirname + <span class="string">"/app/main.js"</span>,<span class="comment">//唯一入口文件  </span></span><br><span class="line">    output: &#123;  </span><br><span class="line">        path: __dirname + <span class="string">"/public"</span>,<span class="comment">//打包后的文件存放的地方  </span></span><br><span class="line">        filename: <span class="string">"bundle.js"</span><span class="comment">//打包后输出文件的文件名  </span></span><br><span class="line">    &#125;,  </span><br><span class="line">    devServer: &#123;  </span><br><span class="line">        contentBase: <span class="string">"./public"</span>,<span class="comment">//本地服务器所加载的页面所在的目录  </span></span><br><span class="line">        port: <span class="string">'3000'</span>  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 package.json 文件中添加引导，用以开启本地服务器</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;  </span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"webpack"</span>,  </span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,  </span><br><span class="line">  <span class="string">"description"</span>: <span class="string">""</span>,  </span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"index.js"</span>,  </span><br><span class="line">  <span class="string">"scripts"</span>: &#123;  </span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,  </span><br><span class="line">    <span class="string">"dev"</span>: <span class="string">"webpack --mode development"</span>,  </span><br><span class="line">    <span class="string">"build"</span>: <span class="string">"webpack --mode production"</span>,  </span><br><span class="line">    &lt;span style=<span class="string">"color:#ff0000;"</span>&gt;<span class="string">"server"</span>: <span class="string">"webpack-dev-server --open"</span>&lt;<span class="regexp">/span&gt;  </span></span><br><span class="line"><span class="regexp">  &#125;,  </span></span><br><span class="line"><span class="regexp">  "author": "",  </span></span><br><span class="line"><span class="regexp">  "license": "ISC",  </span></span><br><span class="line"><span class="regexp">  "devDependencies": &#123;  </span></span><br><span class="line"><span class="regexp">    "webpack": "^4.2.0",  </span></span><br><span class="line"><span class="regexp">    "webpack-cli": "^2.0.13",  </span></span><br><span class="line"><span class="regexp">    "webpack-dev-server": "^3.1.1"  </span></span><br><span class="line"><span class="regexp">  &#125;  </span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<p>在终端中执行</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run server</span><br></pre></td></tr></table></figure>
<p>会自动可开启服务，并打开本地服务器所加载的页面</p>
<h1 id="缓存的问题"><a href="#缓存的问题" class="headerlink" title="缓存的问题"></a>缓存的问题</h1><p>缓存无处不在，使用缓存的最好方法是保证你的文件名和文件内容是匹配的（内容改变，名称相应改变），webpack可以把一个哈希值添加到打包的文件名中</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;  </span><br><span class="line">    entry: __dirname + <span class="string">"/app/main.js"</span>,<span class="comment">//唯一入口文件  </span></span><br><span class="line">    output: &#123;  </span><br><span class="line">        path: __dirname + <span class="string">"/public"</span>,<span class="comment">//打包后的文件存放的地方  </span></span><br><span class="line">        filename: "&lt;span style="color:#ff0000;"&gt;bundle-[hash].js&lt;/span&gt;"//打包后输出文件的文件名  </span><br><span class="line">    &#125;,  </span><br><span class="line">    devServer: &#123;  </span><br><span class="line">        contentBase: <span class="string">"./public"</span>,<span class="comment">//本地服务器所加载的页面所在的目录  </span></span><br><span class="line">        port: <span class="string">'3000'</span>  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>重新执行打包的命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>可以看到打包后的文件名带上了 hash 值，只要文件有修改，重新打包后的文件 hash 值就会改变，可以有效的避免缓存的问题</p>
<p><img src="/images/20180411/1523439044504.png" alt="image"></p>
<h1 id="插件的使用"><a href="#插件的使用" class="headerlink" title="插件的使用"></a>插件的使用</h1><h2 id="HtmlWebpackPlugin"><a href="#HtmlWebpackPlugin" class="headerlink" title="HtmlWebpackPlugin"></a>HtmlWebpackPlugin</h2><p>这个插件的作用是依据一个简单的index.html模板，生成一个自动引用你打包后的JS文件的新index.html。这在每次生成的js文件名称不同时非常有用（比如添加了hash值）</p>
<p>安装</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save-dev html-webpack-plugin</span><br></pre></td></tr></table></figure>
<p>在项目的根目录下新建文件夹 build 用于存放生成的 index.html 和 bundle.js （自动生成）</p>
<p>在项目的根目录下新建文件夹 tmpl 用于存放模板</p>
<p>在  tmpl 目录下新建文件 index.tmpl.html，不需要引入打包后的文件</p>
<p><img src="/images/20180411/1523439059080.png" alt="image"></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- index.tmpl.html --&gt;</span>  </span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>更新 webpack 的配置文件 webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">module</span>.exports = &#123;  </span><br><span class="line">    entry: __dirname + <span class="string">"/app/main.js"</span>,<span class="comment">//唯一入口文件  </span></span><br><span class="line">    output: &#123;  </span><br><span class="line">        path: __dirname + <span class="string">"/build"</span>,<span class="comment">// 修改了此处的目录，打包后的文件存放的地方  </span></span><br><span class="line">        filename: <span class="string">"bundle-[hash].js"</span><span class="comment">//打包后输出文件的文件名  </span></span><br><span class="line">    &#125;,  </span><br><span class="line">    devServer: &#123;  </span><br><span class="line">        contentBase: <span class="string">"./public"</span>,<span class="comment">//本地服务器所加载的页面所在的目录  </span></span><br><span class="line">        port: <span class="string">'3000'</span>  </span><br><span class="line">    &#125;,  </span><br><span class="line">    plugins: [  </span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;  </span><br><span class="line">            template: __dirname + <span class="string">"/tmpl/index.tmpl.html"</span><span class="comment">//new 一个这个插件的实例，并传入相关的参数  </span></span><br><span class="line">        &#125;)  </span><br><span class="line">    ]  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行打包命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>执行结果为</p>
<p><img src="/images/20180411/1523439073065.png" alt="image"></p>
<p>build 文件夹中可以看到新生成的 index.html 和 打包后的 js 文件</p>
<p><img src="/images/20180411/1523439085305.png" alt="image"></p>
<h2 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="headerlink" title="clean-webpack-plugin"></a>clean-webpack-plugin</h2><p>添加了hash之后，会导致改变文件内容后重新打包时，文件名不同而内容越来越多</p>
<p>修改 greeter.js 的内容</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </span><br><span class="line">  <span class="keyword">var</span> greet = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);  </span><br><span class="line">  greet.textContent = <span class="string">"hello webpack hello world"</span>;  </span><br><span class="line">  <span class="keyword">return</span> greet;  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>再次执行打包命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>可以发现 build 中多了一个打包文件，并且 index.html 中引入的  js 文件也改变为了新的打包文件，此时旧的打包文件也就没有用了</p>
<p><img src="/images/20180411/1523439095880.png" alt="image"></p>
<p>安装插件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save-dev clean-webpack-plugin</span><br></pre></td></tr></table></figure>
<p>更新 webpack 的配置文件 webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);  </span><br><span class="line"><span class="keyword">var</span> CleanWebpackPlugin = <span class="built_in">require</span>(<span class="string">"clean-webpack-plugin"</span>);  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">module</span>.exports = &#123;  </span><br><span class="line">    entry: __dirname + <span class="string">"/app/main.js"</span>,<span class="comment">//唯一入口文件  </span></span><br><span class="line">    output: &#123;  </span><br><span class="line">        path: __dirname + <span class="string">"/build"</span>,<span class="comment">// 修改了此处的目录，打包后的文件存放的地方  </span></span><br><span class="line">        filename: <span class="string">"bundle-[hash].js"</span><span class="comment">//打包后输出文件的文件名  </span></span><br><span class="line">    &#125;,  </span><br><span class="line">    devServer: &#123;  </span><br><span class="line">        contentBase: <span class="string">"./public"</span>,<span class="comment">//本地服务器所加载的页面所在的目录  </span></span><br><span class="line">        port: <span class="string">'3000'</span>  </span><br><span class="line">    &#125;,  </span><br><span class="line">    plugins: [  </span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin(&#123;  </span><br><span class="line">            template: __dirname + <span class="string">"/tmpl/index.tmpl.html"</span><span class="comment">//new 一个这个插件的实例，并传入相关的参数  </span></span><br><span class="line">        &#125;),  </span><br><span class="line">        <span class="keyword">new</span> CleanWebpackPlugin(<span class="string">'build/*.*'</span>, &#123;  </span><br><span class="line">            root: __dirname,  </span><br><span class="line">            verbose: <span class="literal">true</span>,  </span><br><span class="line">            dry: <span class="literal">false</span>  </span><br><span class="line">        &#125;)        </span><br><span class="line">    ]  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>删除 build 中没有被要引用的打包文件</p>
<p><img src="/images/20180411/1523439105912.png" alt="image"></p>
<p>修改 greeter.js 文件</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </span><br><span class="line">  <span class="keyword">var</span> greet = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);  </span><br><span class="line">  greet.textContent = <span class="string">"hello webpack hello world hello clean-webpack-plugin"</span>;  </span><br><span class="line">  <span class="keyword">return</span> greet;  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>执行打包命令</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<p>运行成功后可以看到 build 文件夹中的打包文件的名称变了，也就是自动删除了以前的打包文件，并且生成了新的打包文件，index.html 的引入文件也自动 修改为新的打包文件</p>
<p><img src="/images/20180411/1523439115320.png" alt="image"></p>
<p>More Info:<a href="https://github.com/liuzhiyong94/webpack" target="_blank" rel="noopener">Github</a></p>
]]></content>
      <categories>
        <category>Webpack</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>store三级联动</title>
    <url>/2018/08/16/Ext/store%E4%B8%89%E7%BA%A7%E8%81%94%E5%8A%A8/</url>
    <content><![CDATA[<p>数据请求后加载到store中，利用store筛选数据并进行展示</p>
<a id="more"></a>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Ext.define(<span class="string">'WebSystem.view.ManualWin'</span>, &#123;</span><br><span class="line">        extend: <span class="string">'Ext.window.Window'</span>,</span><br><span class="line">        id: <span class="string">'manualWinId'</span>,</span><br><span class="line">        xtype: <span class="string">'manualWin'</span>,</span><br><span class="line">        width: <span class="number">400</span>,</span><br><span class="line">        height: <span class="number">340</span>,</span><br><span class="line">        constrain: <span class="literal">true</span>,</span><br><span class="line">        modal: <span class="literal">true</span>,</span><br><span class="line">        constrainHeader: <span class="literal">true</span>,<span class="comment">//true将窗口约束到可见区域，false不限制窗体头部位置</span></span><br><span class="line">        items: [</span><br><span class="line">            &#123;</span><br><span class="line">                xtype: <span class="string">'form'</span>,</span><br><span class="line">                layout: <span class="string">'column'</span>,</span><br><span class="line">                width: <span class="number">380</span>,</span><br><span class="line">                border: <span class="literal">false</span>,</span><br><span class="line">                itemId: <span class="string">'formId1'</span>,</span><br><span class="line">                defaults: &#123;</span><br><span class="line">                    xtype: <span class="string">'textfield'</span>,</span><br><span class="line">                    labelWidth: <span class="number">100</span>,</span><br><span class="line">                    margin: <span class="string">'10 0 0 0'</span>,</span><br><span class="line">                    columnWidth: <span class="number">1</span></span><br><span class="line">                &#125;,</span><br><span class="line">                items: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        itemId: <span class="string">'licenseno'</span>,</span><br><span class="line">                        readOnly: <span class="literal">true</span>,</span><br><span class="line">                        fieldStyle: <span class="string">'background:#ffffff;border:0px;'</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        xtype: <span class="string">'radiogroup'</span>,</span><br><span class="line">                        itemId: <span class="string">'rota'</span>,</span><br><span class="line">                        allowBlank: <span class="literal">false</span>,</span><br><span class="line">                        defaults: &#123;</span><br><span class="line">                            columnWidth: <span class="number">0.25</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        items: [</span><br><span class="line">                            &#123; <span class="attr">inputValue</span>: <span class="number">1</span>, <span class="attr">boxLabel</span>: <span class="string">'查勘值班表'</span>, <span class="attr">name</span>: <span class="string">'rota'</span>, <span class="attr">itemId</span>: <span class="string">'rota1'</span> &#125;,</span><br><span class="line">                            &#123; <span class="attr">inputValue</span>: <span class="number">2</span>, <span class="attr">boxLabel</span>: <span class="string">'定损值班表'</span>, <span class="attr">name</span>: <span class="string">'rota'</span>, <span class="attr">itemId</span>: <span class="string">'rota2'</span> &#125;,</span><br><span class="line">                            &#123; <span class="attr">inputValue</span>: <span class="number">3</span>, <span class="attr">boxLabel</span>: <span class="string">'人伤值班表'</span>, <span class="attr">name</span>: <span class="string">'rota'</span>, <span class="attr">itemId</span>: <span class="string">'rota3'</span> &#125;,</span><br><span class="line">                            &#123; <span class="attr">inputValue</span>: <span class="number">4</span>, <span class="attr">boxLabel</span>: <span class="string">'远程定损'</span>, <span class="attr">name</span>: <span class="string">'rota'</span>, <span class="attr">itemId</span>: <span class="string">'rota4'</span> &#125;</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                xtype: <span class="string">'form'</span>,</span><br><span class="line">                layout: <span class="string">'column'</span>,</span><br><span class="line">                width: <span class="number">380</span>,</span><br><span class="line">                border: <span class="literal">false</span>,</span><br><span class="line">                itemId: <span class="string">'formId2'</span>,</span><br><span class="line">                defaults: &#123;</span><br><span class="line">                    xtype: <span class="string">'textfield'</span>,</span><br><span class="line">                    labelWidth: <span class="number">50</span>,</span><br><span class="line">                    width: <span class="number">350</span>,</span><br><span class="line">                    margin: <span class="string">'10 0 0 0'</span>,</span><br><span class="line">                    columnWidth: <span class="number">1</span></span><br><span class="line">                &#125;,</span><br><span class="line">                items: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        xtype: <span class="string">"combobox"</span>,</span><br><span class="line">                        itemId: <span class="string">'area2'</span>,</span><br><span class="line">                        margin: <span class="string">'5 5 5 5'</span>,</span><br><span class="line">                        emptyText: <span class="string">'请选择'</span>,</span><br><span class="line">                        editable: <span class="literal">false</span>,</span><br><span class="line">                        fieldLabel: <span class="string">'&lt;span style="color: red"&gt;*&lt;/span&gt;市'</span>,</span><br><span class="line">                        store: <span class="string">'ManualAreaStore2'</span>,</span><br><span class="line">                        displayField: <span class="string">'AreaName'</span>,</span><br><span class="line">                        valueField: <span class="string">'Area2Code'</span>,</span><br><span class="line">                        allowBlank: <span class="literal">false</span>,</span><br><span class="line">                        listeners: &#123;</span><br><span class="line">                            select: <span class="function"><span class="keyword">function</span> (<span class="params">combo, record, index</span>) </span>&#123;</span><br><span class="line">                                Ext.getCmp(<span class="string">'manualWinId'</span>).down(<span class="string">'#area3'</span>).setValue(<span class="string">''</span>);</span><br><span class="line">                                Ext.getCmp(<span class="string">'manualWinId'</span>).down(<span class="string">'#area4'</span>).setValue(<span class="string">''</span>);</span><br><span class="line">                                <span class="keyword">var</span> store = Ext.getStore(<span class="string">'ManualAreaStore1'</span>);</span><br><span class="line">                                <span class="keyword">var</span> Area2Code = record[<span class="number">0</span>].data.Area2Code;</span><br><span class="line">                                <span class="keyword">var</span> data = [];</span><br><span class="line">                                store.filterBy(<span class="function"><span class="keyword">function</span> (<span class="params">_record, id</span>) </span>&#123;</span><br><span class="line">                                    <span class="keyword">if</span> (_record.get(<span class="string">'AreaClass'</span>) == <span class="number">3</span> &amp;&amp; _record.get(<span class="string">'Area2Code'</span>) == Area2Code) &#123;</span><br><span class="line">                                        data.push(_record);</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;);</span><br><span class="line">                                Ext.getStore(<span class="string">"ManualAreaStore3"</span>).removeAll();</span><br><span class="line">                                Ext.getStore(<span class="string">"ManualAreaStore4"</span>).removeAll();</span><br><span class="line">                                Ext.getStore(<span class="string">"ManualAreaStore3"</span>).getProxy().data = data;</span><br><span class="line">                                Ext.getStore(<span class="string">"ManualAreaStore3"</span>).load();</span><br><span class="line">                                <span class="keyword">if</span>(Ext.getStore(<span class="string">"ManualAreaStore3"</span>).data.items.length)&#123;</span><br><span class="line">                                    Ext.getCmp(<span class="string">'manualWinId'</span>).down(<span class="string">'#area3'</span>).setValue(</span><br><span class="line">                                        Ext.getStore(<span class="string">"ManualAreaStore3"</span>).data.items[<span class="number">0</span>].raw.Area3Code</span><br><span class="line">                                    );</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        xtype: <span class="string">"combobox"</span>,</span><br><span class="line">                        itemId: <span class="string">'area3'</span>,</span><br><span class="line">                        margin: <span class="string">'5 5 5 5'</span>,</span><br><span class="line">                        emptyText: <span class="string">'请选择'</span>,</span><br><span class="line">                        editable: <span class="literal">false</span>,</span><br><span class="line">                        fieldLabel: <span class="string">'&lt;span style="color: red"&gt;*&lt;/span&gt;区/县'</span>,</span><br><span class="line">                        store: <span class="string">'ManualAreaStore3'</span>,</span><br><span class="line">                        displayField: <span class="string">'AreaName'</span>,</span><br><span class="line">                        valueField: <span class="string">'Area3Code'</span>,</span><br><span class="line">                        allowBlank: <span class="literal">false</span>,</span><br><span class="line">                        listeners: &#123;</span><br><span class="line">                            select: <span class="function"><span class="keyword">function</span> (<span class="params">combo, record, index</span>) </span>&#123;</span><br><span class="line">                                Ext.getCmp(<span class="string">'manualWinId'</span>).down(<span class="string">'#area4'</span>).setValue(<span class="string">''</span>);</span><br><span class="line">                                <span class="keyword">var</span> store = Ext.getStore(<span class="string">'ManualAreaStore1'</span>);</span><br><span class="line">                                <span class="keyword">var</span> Area3Code = record[<span class="number">0</span>].data.Area3Code;</span><br><span class="line">                                <span class="keyword">var</span> data = [];</span><br><span class="line">                                store.filterBy(<span class="function"><span class="keyword">function</span> (<span class="params">_record, id</span>) </span>&#123;</span><br><span class="line">                                    <span class="keyword">if</span> (_record.get(<span class="string">'AreaClass'</span>) == <span class="number">4</span> &amp;&amp; _record.get(<span class="string">'Area3Code'</span>) == Area3Code) &#123;</span><br><span class="line">                                        data.push(_record);</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;);</span><br><span class="line">                                Ext.getStore(<span class="string">"ManualAreaStore4"</span>).removeAll();</span><br><span class="line">                                Ext.getStore(<span class="string">"ManualAreaStore4"</span>).getProxy().data = data;</span><br><span class="line">                                Ext.getStore(<span class="string">"ManualAreaStore4"</span>).load();</span><br><span class="line">                                <span class="keyword">if</span>(Ext.getStore(<span class="string">"ManualAreaStore4"</span>).data.items.length)&#123;</span><br><span class="line">                                    Ext.getCmp(<span class="string">'manualWinId'</span>).down(<span class="string">'#area4'</span>).setValue(</span><br><span class="line">                                        Ext.getStore(<span class="string">"ManualAreaStore4"</span>).data.items[<span class="number">0</span>].raw.Area4Code</span><br><span class="line">                                    );</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        xtype: <span class="string">"combobox"</span>,</span><br><span class="line">                        itemId: <span class="string">'area4'</span>,</span><br><span class="line">                        margin: <span class="string">'5 5 5 5'</span>,</span><br><span class="line">                        emptyText: <span class="string">'请选择'</span>,</span><br><span class="line">                        editable: <span class="literal">false</span>,</span><br><span class="line">                        fieldLabel: <span class="string">'&lt;span style="color: red"&gt;*&lt;/span&gt;分区'</span>,</span><br><span class="line">                        store: <span class="string">'ManualAreaStore4'</span>,</span><br><span class="line">                        displayField: <span class="string">'AreaName'</span>,</span><br><span class="line">                        valueField: <span class="string">'Area4Code'</span>,</span><br><span class="line">                        allowBlank: <span class="literal">false</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        xtype: <span class="string">"combobox"</span>,</span><br><span class="line">                        itemId: <span class="string">'username'</span>,</span><br><span class="line">                        margin: <span class="string">'5 5 5 5'</span>,</span><br><span class="line">                        emptyText: <span class="string">'请选择'</span>,</span><br><span class="line">                        editable: <span class="literal">false</span>,</span><br><span class="line">                        fieldLabel: <span class="string">'&lt;span style="color: red"&gt;*&lt;/span&gt;姓名'</span>,</span><br><span class="line">                        <span class="comment">// store: Ext.getStore('GroupStore'),</span></span><br><span class="line">                        displayField: <span class="string">'acg_name'</span>,</span><br><span class="line">                        valueField: <span class="string">'acg_code'</span>,</span><br><span class="line">                        allowBlank: <span class="literal">false</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                xtype: <span class="string">'form'</span>,</span><br><span class="line">                layout: <span class="string">'column'</span>,</span><br><span class="line">                width: <span class="number">380</span>,</span><br><span class="line">                border: <span class="literal">false</span>,</span><br><span class="line">                itemId: <span class="string">'formId3'</span>,</span><br><span class="line">                defaults: &#123;</span><br><span class="line">                    xtype: <span class="string">'textfield'</span>,</span><br><span class="line">                    labelWidth: <span class="number">50</span>,</span><br><span class="line">                    width: <span class="number">350</span>,</span><br><span class="line">                    margin: <span class="string">'10 0 0 0'</span>,</span><br><span class="line">                    columnWidth: <span class="number">1</span></span><br><span class="line">                &#125;,</span><br><span class="line">                items: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        xtype: <span class="string">"combobox"</span>,</span><br><span class="line">                        itemId: <span class="string">'username'</span>,</span><br><span class="line">                        margin: <span class="string">'5 5 5 5'</span>,</span><br><span class="line">                        emptyText: <span class="string">'请选择'</span>,</span><br><span class="line">                        editable: <span class="literal">false</span>,</span><br><span class="line">                        fieldLabel: <span class="string">'&lt;span style="color: red"&gt;*&lt;/span&gt;姓名'</span>,</span><br><span class="line">                        <span class="comment">// store: Ext.getStore('GroupStore'),</span></span><br><span class="line">                        displayField: <span class="string">'acg_name'</span>,</span><br><span class="line">                        valueField: <span class="string">'acg_code'</span>,</span><br><span class="line">                        allowBlank: <span class="literal">false</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        buttons: [</span><br><span class="line">            <span class="string">'-&gt;'</span>,</span><br><span class="line">            &#123; <span class="attr">text</span>: <span class="string">'确定'</span>, <span class="attr">itemId</span>: <span class="string">'btnConfirm'</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">text</span>: <span class="string">'取消'</span>, <span class="attr">itemId</span>: <span class="string">'btnCancal'</span> &#125;,</span><br><span class="line">            <span class="string">'-&gt;'</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;.call(<span class="keyword">this</span>));</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Ext</category>
      </categories>
      <tags>
        <tag>store</tag>
      </tags>
  </entry>
  <entry>
    <title>log4js</title>
    <url>/2020/11/09/Log4js/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> log4js = <span class="built_in">require</span>(<span class="string">'log4js'</span>);</span><br><span class="line">log4js.configure(&#123;</span><br><span class="line">    replaceConsole: <span class="literal">true</span>,</span><br><span class="line">    appenders: &#123;</span><br><span class="line">        cheese: &#123;</span><br><span class="line">            <span class="comment">// 设置类型为 dateFile</span></span><br><span class="line">            type: <span class="string">'dateFile'</span>,</span><br><span class="line">            <span class="comment">// 配置文件名为 myLog.log</span></span><br><span class="line">            filename: <span class="string">'logs/mylog.log'</span>,</span><br><span class="line">            <span class="comment">// 指定编码格式为 utf-8</span></span><br><span class="line">            encoding: <span class="string">'utf-8'</span>,</span><br><span class="line">            <span class="comment">// 配置 layout，此处使用自定义模式 pattern</span></span><br><span class="line">            layout: &#123;</span><br><span class="line">                type: <span class="string">"pattern"</span>,</span><br><span class="line">                <span class="comment">// 配置模式，下面会有介绍</span></span><br><span class="line">                pattern: <span class="string">'&#123;"level":"%p","date":"%d","data":%m &#125;'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// 日志文件按日期（天）切割</span></span><br><span class="line">            pattern: <span class="string">"yyyy-MM-dd"</span>,</span><br><span class="line">            <span class="comment">// 回滚旧的日志文件时，保证以 .log 结尾 （只有在 alwaysIncludePattern 为 false 生效）</span></span><br><span class="line">            keepFileExt: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">// 输出的日志文件名是都始终包含 pattern 日期结尾</span></span><br><span class="line">            alwaysIncludePattern: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    categories: &#123;</span><br><span class="line">        <span class="comment">// 设置默认的 categories</span></span><br><span class="line">        <span class="keyword">default</span>: &#123; <span class="attr">appenders</span>: [<span class="string">'cheese'</span>], <span class="attr">level</span>: <span class="string">'debug'</span> &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> logger = log4js.getLogger();</span><br><span class="line">logger.info(<span class="string">"info is ..."</span>);</span><br><span class="line">logger.error(<span class="string">"err is ..."</span>);</span><br><span class="line">logger.debug(<span class="string">"debug is ..."</span>);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>javascript</category>
      </categories>
      <tags>
        <tag>log4js</tag>
      </tags>
  </entry>
</search>
