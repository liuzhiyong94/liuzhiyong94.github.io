{"meta":{"title":"我的笔记","subtitle":null,"description":"武汉华创欣网科技有限公司","author":"刘志勇","url":"https://in.imzhiyong.cn","root":"/"},"pages":[{"title":"404","date":"2020-09-16T08:54:51.000Z","updated":"2020-09-16T08:57:31.479Z","comments":true,"path":"404/index.html","permalink":"https://in.imzhiyong.cn/404/index.html","excerpt":"","text":"&lt;!DOCTYPE html&gt; 404"},{"title":"关于","date":"2018-04-04T09:02:04.000Z","updated":"2020-09-16T03:44:06.895Z","comments":false,"path":"about/index.html","permalink":"https://in.imzhiyong.cn/about/index.html","excerpt":"","text":"刘志勇联系方式：13886902934邮箱：976882187@qq.com公司：武汉华创欣网科技有限公司"},{"title":"标签","date":"2018-04-04T08:13:33.000Z","updated":"2020-09-16T03:44:06.913Z","comments":false,"path":"tags/index.html","permalink":"https://in.imzhiyong.cn/tags/index.html","excerpt":"","text":""},{"title":"分类","date":"2018-04-04T08:16:49.000Z","updated":"2020-09-16T03:44:06.897Z","comments":false,"path":"categories/index.html","permalink":"https://in.imzhiyong.cn/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"通过正则表达式截取字符串中的字符","slug":"reg-intercept-string","date":"2020-09-17T08:16:32.000Z","updated":"2020-09-17T08:30:21.402Z","comments":true,"path":"2020/09/17/reg-intercept-string/","link":"","permalink":"https://in.imzhiyong.cn/2020/09/17/reg-intercept-string/","excerpt":"","text":"12345const reg = /(?&lt;=(aaa)).&#123;1,100&#125;(?=(ccc))/g;const str = \"aaabbbcccddd\";let res = str.match(reg); // [\"bbb\"] ?&lt;=(aaa)表示以”aaa”开始?=(ccc)表示以”ccc”结束","categories":[{"name":"正则表达式","slug":"正则表达式","permalink":"https://in.imzhiyong.cn/categories/正则表达式/"}],"tags":[{"name":"截取字符串","slug":"截取字符串","permalink":"https://in.imzhiyong.cn/tags/截取字符串/"}]},{"title":"table表头固定","slug":"H5/table表头固定","date":"2018-10-22T07:25:17.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/10/22/H5/table表头固定/","link":"","permalink":"https://in.imzhiyong.cn/2018/10/22/H5/table表头固定/","excerpt":"","text":"实现表头固定，内容滚动 123&lt;div style=\"width: 100%;height: 400px;background: #fff;overflow-y: auto;position: relative;\" id=\"table-cont\"&gt; &lt;table&gt;...&lt;/table&gt;&lt;/div&gt; 123456789window.onload = function()&#123; var tableCont = document.querySelector('#table-cont'); function scrollHandle (e)&#123; var scrollTop = this.scrollTop; this.querySelector('thead').style.transform = 'translateY(' + scrollTop + 'px)'; &#125; tableCont.addEventListener('scroll',scrollHandle);&#125;","categories":[{"name":"H5","slug":"H5","permalink":"https://in.imzhiyong.cn/categories/H5/"}],"tags":[{"name":"table","slug":"table","permalink":"https://in.imzhiyong.cn/tags/table/"}]},{"title":"禁止浏览器返回","slug":"H5/禁止浏览器返回","date":"2018-10-19T08:20:56.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/10/19/H5/禁止浏览器返回/","link":"","permalink":"https://in.imzhiyong.cn/2018/10/19/H5/禁止浏览器返回/","excerpt":"","text":"12345//防止页面后退 history.pushState(null, null, document.URL); window.addEventListener('popstate', function () &#123; history.pushState(null, null, document.URL);&#125;);","categories":[{"name":"H5","slug":"H5","permalink":"https://in.imzhiyong.cn/categories/H5/"}],"tags":[{"name":"禁止浏览器返回","slug":"禁止浏览器返回","permalink":"https://in.imzhiyong.cn/tags/禁止浏览器返回/"}]},{"title":"base64转blob对象","slug":"Javascript/base64转blob对象","date":"2018-09-19T06:49:50.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/09/19/Javascript/base64转blob对象/","link":"","permalink":"https://in.imzhiyong.cn/2018/09/19/Javascript/base64转blob对象/","excerpt":"","text":"123456789101112131415function dataURItoBlob(base64Data) &#123; var byteString; if(base64Data.split(',')[0].indexOf('base64') &gt;= 0) byteString = atob(base64Data.split(',')[1]); else byteString = unescape(base64Data.split(',')[1]); var mimeString = base64Data.split(',')[0].split(':')[1].split(';')[0]; var ia = new Uint8Array(byteString.length); for(var i = 0; i &lt; byteString.length; i++) &#123; ia[i] = byteString.charCodeAt(i); &#125; return new Blob([ia], &#123; type: mimeString &#125;);&#125;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://in.imzhiyong.cn/categories/javascript/"}],"tags":[{"name":"base64","slug":"base64","permalink":"https://in.imzhiyong.cn/tags/base64/"},{"name":"blob","slug":"blob","permalink":"https://in.imzhiyong.cn/tags/blob/"}]},{"title":"浏览器实现全屏","slug":"H5/浏览器实现全屏","date":"2018-09-14T03:36:32.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/09/14/H5/浏览器实现全屏/","link":"","permalink":"https://in.imzhiyong.cn/2018/09/14/H5/浏览器实现全屏/","excerpt":"","text":"12345678910111213function FullScreen(el) &#123; var isFullscreen = document.fullScreen || document.mozFullScreen || document.webkitIsFullScreen; if(!isFullscreen) &#123; //进入全屏,多重短路表达式 (el.requestFullscreen &amp;&amp; el.requestFullscreen()) || (el.mozRequestFullScreen &amp;&amp; el.mozRequestFullScreen()) || (el.webkitRequestFullscreen &amp;&amp; el.webkitRequestFullscreen()) || (el.msRequestFullscreen &amp;&amp; el.msRequestFullscreen()); &#125; else &#123; //退出全屏,三目运算符 document.exitFullscreen ? document.exitFullscreen() : document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitExitFullscreen ? document.webkitExitFullscreen() : ''; &#125;&#125;","categories":[{"name":"H5","slug":"H5","permalink":"https://in.imzhiyong.cn/categories/H5/"}],"tags":[{"name":"浏览器","slug":"浏览器","permalink":"https://in.imzhiyong.cn/tags/浏览器/"},{"name":"全屏","slug":"全屏","permalink":"https://in.imzhiyong.cn/tags/全屏/"}]},{"title":"桌面通知","slug":"H5/桌面通知","date":"2018-09-04T08:00:09.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/09/04/H5/桌面通知/","link":"","permalink":"https://in.imzhiyong.cn/2018/09/04/H5/桌面通知/","excerpt":"","text":"123456789101112131415// 仅支持https服务function showNotice() &#123; Notification.requestPermission(function (perm) &#123; debugger if (perm == \"granted\") &#123; var notification = new Notification(\"这是一个通知撒:\", &#123; dir: \"auto\", lang: \"hi\", tag: \"testTag\", icon: \"https://static.cnblogs.com/images/adminlogo.gif\", body: \"通知content\" &#125;); &#125; &#125;) &#125;","categories":[{"name":"H5","slug":"H5","permalink":"https://in.imzhiyong.cn/categories/H5/"}],"tags":[{"name":"notify","slug":"notify","permalink":"https://in.imzhiyong.cn/tags/notify/"}]},{"title":"css伪类实现同心圆","slug":"H5/css伪类实现同心圆","date":"2018-08-31T09:22:13.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/08/31/H5/css伪类实现同心圆/","link":"","permalink":"https://in.imzhiyong.cn/2018/08/31/H5/css伪类实现同心圆/","excerpt":"","text":"主要用到了css属性 background-clip 实现效果 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128&lt;!DOCTYPE html&gt;&lt;html lang=\"zh\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\" /&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\" /&gt; &lt;title&gt;流程图&lt;/title&gt; &lt;style type=\"text/css\"&gt; *&#123; margin: 0; padding: 0; font-size: 16px; &#125; .wrapper&#123; margin: 10px; &#125; .status&#123; margin-left: 40px; position: relative; &#125; .status:before&#123; content: ''; position: absolute; display: block; left: -33px; top: 1px; width: 16px; height: 16px; padding: 2px; border-radius: 50%; background: #000; border: 1px solid #000; background-clip:content-box; &#125; .step&#123; line-height: 1.6; &#125; .time&#123; margin-left: 92px; box-sizing: border-box; position: relative; color: #40B2D9; height: 25px; &#125; .time:before&#123; content: ''; position: absolute; display: block; left: -21.5px; top: -1px; width: 1px; height: 29px; background: #000; &#125; .text&#123; display: inline-block; width: 48px; text-align: right; &#125; .margingp&#123; margin-left: 92px; box-sizing: border-box; &#125; .aaa&#123; margin-left: 92px; box-sizing: border-box; position: relative; color: #40B2D9; height: 25px; &#125; .aaa::before&#123; content: ''; position: absolute; display: block; left: 100px; top: -1px; width: 50px; height: 50px; border-radius: 50%; background: #000; background-clip:content-box; border: 1px solid red; padding: 50px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=\"wrapper\"&gt; &lt;div class=\"step\"&gt; &lt;span class=\"text\"&gt;待查勘&lt;/span&gt; &lt;span class=\"status\"&gt;查勘任务派发：&lt;/span&gt; &lt;span&gt;2017-09-27 09:43&lt;/span&gt; &lt;p class=\"time\"&gt;&lt;span&gt;历时：&lt;/span&gt;&lt;span&gt;1小时52分钟&lt;/span&gt;&lt;/p&gt; &lt;/div&gt; &lt;div class=\"step\"&gt; &lt;span class=\"text\"&gt;查勘中&lt;/span&gt; &lt;span class=\"status\"&gt;出发：&lt;/span&gt; &lt;span&gt;2017-09-27 09:43&lt;/span&gt; &lt;p class=\"time\"&gt;&lt;span&gt;历时：&lt;/span&gt;&lt;span&gt;1小时52分钟&lt;/span&gt;&lt;/p&gt; &lt;/div&gt; &lt;div class=\"step\"&gt; &lt;span class=\"text\"&gt;&lt;/span&gt; &lt;span class=\"status\"&gt;到达：&lt;/span&gt; &lt;span&gt;2017-09-27 09:43&lt;/span&gt; &lt;p class=\"time\"&gt;&lt;span&gt;历时：&lt;/span&gt;&lt;span&gt;1小时52分钟&lt;/span&gt;&lt;/p&gt; &lt;/div&gt; &lt;div class=\"step\"&gt; &lt;span class=\"text\"&gt;&lt;/span&gt; &lt;span class=\"status\"&gt;撤离：&lt;/span&gt; &lt;span&gt;2017-09-27 09:43&lt;/span&gt; &lt;p class=\"time\"&gt;&lt;span&gt;历时：&lt;/span&gt;&lt;span&gt;1小时52分钟&lt;/span&gt;&lt;/p&gt; &lt;/div&gt; &lt;div class=\"step\"&gt; &lt;span class=\"text\"&gt;已查勘&lt;/span&gt; &lt;span class=\"status\"&gt;已查勘：&lt;/span&gt; &lt;span&gt;2017-09-27 09:43&lt;/span&gt; &lt;p class=\"time\"&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/p&gt; &lt;/div&gt; &lt;div class=\"step\"&gt; &lt;span class=\"text\"&gt;定损&lt;/span&gt; &lt;span class=\"status\"&gt;定损任务派发：&lt;/span&gt; &lt;span&gt;2017-09-27 09:43&lt;/span&gt; &lt;p class=\"margingp\"&gt;&lt;span&gt;定损任务领取：&lt;/span&gt;&lt;span&gt;&lt;/span&gt;2017-09-27 09:43&lt;/p&gt; &lt;p class=\"margingp\"&gt;&lt;span&gt;已定损：&lt;/span&gt;&lt;span&gt;&lt;/span&gt;2017-09-27 09:43&lt;/p&gt; &lt;/div&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;","categories":[{"name":"H5","slug":"H5","permalink":"https://in.imzhiyong.cn/categories/H5/"}],"tags":[{"name":"background-clip","slug":"background-clip","permalink":"https://in.imzhiyong.cn/tags/background-clip/"},{"name":"before","slug":"before","permalink":"https://in.imzhiyong.cn/tags/before/"}]},{"title":"父页面调用frame中的函数","slug":"H5/父页面调用frame中的函数","date":"2018-08-23T10:58:42.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/08/23/H5/父页面调用frame中的函数/","link":"","permalink":"https://in.imzhiyong.cn/2018/08/23/H5/父页面调用frame中的函数/","excerpt":"","text":"1parent.window.frames[0].frameElement.contentWindow.Fun()","categories":[{"name":"H5","slug":"H5","permalink":"https://in.imzhiyong.cn/categories/H5/"}],"tags":[{"name":"iframe","slug":"iframe","permalink":"https://in.imzhiyong.cn/tags/iframe/"}]},{"title":"获取本地图片","slug":"H5/获取本地图片","date":"2018-08-16T11:39:19.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/08/16/H5/获取本地图片/","link":"","permalink":"https://in.imzhiyong.cn/2018/08/16/H5/获取本地图片/","excerpt":"","text":"读取本地图片，拍照或者读取相册，兼容android，ios 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"&gt; &lt;title&gt;手机端通信&lt;/title&gt; &lt;script src=\"jquery-1.8.2.min.js\"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt; 请选取一个图像文件: &lt;input type=\"file\" id=\"file\" name=\"file\" /&gt;&lt;/body&gt;&lt;/html&gt;&lt;script&gt; var u = navigator.userAgent; var isiOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/); if (isiOS) &#123; document.getElementById('file').removeAttribute(\"capture\", \"camera\"); &#125; function ProcessFile(e) &#123; var file = document.getElementById('file').files[0]; if (file) &#123; var reader = new FileReader(); reader.onload = function (event) &#123; var txt = event.target.result; var img = document.createElement(\"img\"); img.src = txt;//将图片base64字符串赋值给img的src alert(txt); &#125;; &#125; reader.readAsDataURL(file); &#125; function contentLoaded() &#123; document.getElementById('file').addEventListener('change', ProcessFile, false); &#125; window.addEventListener(\"DOMContentLoaded\", contentLoaded, false);&lt;/script&gt;","categories":[{"name":"H5","slug":"H5","permalink":"https://in.imzhiyong.cn/categories/H5/"}],"tags":[{"name":"file","slug":"file","permalink":"https://in.imzhiyong.cn/tags/file/"}]},{"title":"base64保存图片","slug":"Node/base64保存图片","date":"2018-08-16T11:37:58.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/08/16/Node/base64保存图片/","link":"","permalink":"https://in.imzhiyong.cn/2018/08/16/Node/base64保存图片/","excerpt":"","text":"12345678910111213141516171819202122uploadPic: function () &#123; var Me = this; var imgData = Me.req.body.base64; var topic = Me.req.body.topic; var base64Data = imgData.replace(/^data:image\\/\\w+;base64,/, \"\"); var dataBuffer = new Buffer(base64Data, 'base64'); var now = hcUti.formatDate(new Date(), 'yyyy/MM/dd'); var filePath = './web/upload/' + now + '/' + topic + '/'; var fullPath = './web/upload/' + now + '/' + topic + '/' + new Date().getTime() + '.jpg'; var f = new _File(); f.createFile(dataBuffer, filePath, fullPath, function (err, result) &#123; if (err) &#123; console.log('err', err) return cbError(50003, Me.cb); &#125; else &#123; return Me.cb(200, \"\", fullPath); &#125; &#125;);&#125;","categories":[{"name":"Node","slug":"Node","permalink":"https://in.imzhiyong.cn/categories/Node/"}],"tags":[{"name":"base64","slug":"base64","permalink":"https://in.imzhiyong.cn/tags/base64/"}]},{"title":"GridPanel翻页勾选记录","slug":"Ext/GridPanel翻页勾选记录","date":"2018-08-16T11:34:37.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/08/16/Ext/GridPanel翻页勾选记录/","link":"","permalink":"https://in.imzhiyong.cn/2018/08/16/Ext/GridPanel翻页勾选记录/","excerpt":"gridpanel的列表在翻页后，前后的勾选会自动取消，可以避免出现这种情况","text":"gridpanel的列表在翻页后，前后的勾选会自动取消，可以避免出现这种情况 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566// 已关联案件Ext.define('WebSystem.view.UnRelateFileGridPanel', &#123; extend: 'Ext.grid.Panel', id: 'unRelateFileGridPanelId', xtype: 'unRelateFileGridPanel', enableColumnMove: false, store: 'UnRelateFileStore', viewConfig: &#123; forceFit: true, loadMask: false, enableTextSelection:true &#125;, border: false, initComponent: function () &#123; Ext.apply(this, &#123; selModel: &#123; injectCheckbox: 0, mode: \"SIMPLE\", //\"SINGLE\"/\"SIMPLE\"/\"MULTI\" checkOnly: true, //只能通过checkbox选择 pruneRemoved: false, onHeaderClick: function (headerCt, header, e) &#123; isChecked = false; if (header.isCheckerHd) &#123; e.stopEvent(); var me = this, isChecked = header.el.hasCls(Ext.baseCSSPrefix + 'grid-hd-checker-on'); me.preventFocus = true; if (isChecked) &#123; for (var i = 0; i &lt; this.store.data.items.length; i++) &#123; this.deselect(this.store.data.getAt(i), null); &#125; &#125; else &#123; me.selectAll(); header.el.addCls(Ext.baseCSSPrefix + 'grid-hd-checker-on'); &#125; delete me.preventFocus; &#125; &#125; &#125;, selType: \"checkboxmodel\", columns: [ &#123; header: '序号', xtype: 'rownumberer', width: 60, align: 'center' &#125;, &#123; text: '文件名', flex: 1, dataIndex: 'filename', align: 'center' &#125;, &#123; text: '上传时间', flex: 1, dataIndex: 'uploadtime', align: 'center', renderer: function (value, metaData, record, rowIdx, colIdx, store) &#123; var _str = ''; _str = formatDate(new Date(value * 1), 'yyyy-MM-dd hh:mm:ss'); return _str; &#125; &#125;, &#123; text: '操作', flex: 1, dataIndex: 'operate', itemId: 'operate', align: 'center', renderer: function (value, metaData, record, rowIdx, colIdx, store) &#123; var str1 = ''; var str2 = ''; str1 = \"&lt;button type='button' id='preview' class='btnGridContr'&gt;预览&lt;/button&gt; \"; // str2 = \"&lt;button type='button' id='relate' class='btnGridContr' style='width:70px;'&gt;关联案件&lt;/button&gt; \"; return str1 + str2; &#125; &#125; ] &#125;); this.callParent(arguments); &#125;&#125;);","categories":[{"name":"Ext","slug":"Ext","permalink":"https://in.imzhiyong.cn/categories/Ext/"}],"tags":[{"name":"gridpanel","slug":"gridpanel","permalink":"https://in.imzhiyong.cn/tags/gridpanel/"}]},{"title":"气泡提示","slug":"Ext/气泡提示","date":"2018-08-16T11:33:07.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/08/16/Ext/气泡提示/","link":"","permalink":"https://in.imzhiyong.cn/2018/08/16/Ext/气泡提示/","excerpt":"","text":"1234567&#123; text: '报案号', flex: 1, dataIndex: 'caseno', align: 'center', renderer: function (value, metaData, record, rowIdx, colIdx, store) &#123; metaData.tdAttr = 'data-qtip=\"' + value + '\"'; return value; &#125;&#125;","categories":[{"name":"Ext","slug":"Ext","permalink":"https://in.imzhiyong.cn/categories/Ext/"}],"tags":[{"name":"气泡","slug":"气泡","permalink":"https://in.imzhiyong.cn/tags/气泡/"}]},{"title":"Dataview的使用","slug":"Ext/Dataview的使用","date":"2018-08-16T11:30:40.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/08/16/Ext/Dataview的使用/","link":"","permalink":"https://in.imzhiyong.cn/2018/08/16/Ext/Dataview的使用/","excerpt":"","text":"利用dataview加载图片列表，使用效果和gridpanel类似，具有分页功能 123456789101112131415161718192021222324252627282930313233343536&#123; xtype: 'dataview', tpl: new Ext.XTemplate( '&lt;ul style=\"width:100%;height:100%;background:#fff;\" class=\"picUl clearfix\"&gt;', '&lt;tpl for=\".\"&gt;', '&lt;li&gt;', '&lt;tpl if=\"this.isPic(values.filetype)==true\"&gt;', '&lt;img src=\"&#123;[values.filepath]&#125;\" /&gt;', '&lt;/tpl&gt;', '&lt;tpl if=\"this.isPic(values.filetype)==false\"&gt;', '&lt;video src=\"&#123;[values.filepath]&#125;\" controls=\"controls\"&gt;&lt;/video&gt;', '&lt;/tpl&gt;', '&lt;div class=\"picUl_op clearfix\"&gt;', '&lt;input type=\"checkbox\" name=\"file\" value=\"&#123;[values.id]&#125;\"/&gt;', '&lt;span&gt;&#123;[this.handleName(values.filename)]&#125;&lt;/span&gt;', '&lt;a download=\"&#123;[values.filename]&#125;\" href=\"&#123;[values.filepath]&#125;\" target=\"_blank\"&gt;下载&lt;/a&gt;', '&lt;/div&gt;', '&lt;/li&gt;', '&lt;/tpl&gt;', '&lt;/ul&gt;', &#123; isPic: function(type)&#123; if(type == 'pic')&#123; return true; &#125; else&#123; return false; &#125; &#125;, handleName: function(value)&#123; return value.replace(/^(^.&#123;20&#125;)(.+)(.&#123;2&#125;\\.+\\w+$)$/g, \"$1...$3\"); &#125; &#125; ), store: 'UnRelateFileStore'&#125;","categories":[{"name":"Ext","slug":"Ext","permalink":"https://in.imzhiyong.cn/categories/Ext/"}],"tags":[{"name":"dataview","slug":"dataview","permalink":"https://in.imzhiyong.cn/tags/dataview/"}]},{"title":"store三级联动","slug":"Ext/store三级联动","date":"2018-08-16T11:19:18.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/08/16/Ext/store三级联动/","link":"","permalink":"https://in.imzhiyong.cn/2018/08/16/Ext/store三级联动/","excerpt":"数据请求后加载到store中，利用store筛选数据并进行展示","text":"数据请求后加载到store中，利用store筛选数据并进行展示 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190(function () &#123; Ext.define('WebSystem.view.ManualWin', &#123; extend: 'Ext.window.Window', id: 'manualWinId', xtype: 'manualWin', width: 400, height: 340, constrain: true, modal: true, constrainHeader: true,//true将窗口约束到可见区域，false不限制窗体头部位置 items: [ &#123; xtype: 'form', layout: 'column', width: 380, border: false, itemId: 'formId1', defaults: &#123; xtype: 'textfield', labelWidth: 100, margin: '10 0 0 0', columnWidth: 1 &#125;, items: [ &#123; itemId: 'licenseno', readOnly: true, fieldStyle: 'background:#ffffff;border:0px;' &#125;, &#123; xtype: 'radiogroup', itemId: 'rota', allowBlank: false, defaults: &#123; columnWidth: 0.25 &#125;, items: [ &#123; inputValue: 1, boxLabel: '查勘值班表', name: 'rota', itemId: 'rota1' &#125;, &#123; inputValue: 2, boxLabel: '定损值班表', name: 'rota', itemId: 'rota2' &#125;, &#123; inputValue: 3, boxLabel: '人伤值班表', name: 'rota', itemId: 'rota3' &#125;, &#123; inputValue: 4, boxLabel: '远程定损', name: 'rota', itemId: 'rota4' &#125; ] &#125; ] &#125;, &#123; xtype: 'form', layout: 'column', width: 380, border: false, itemId: 'formId2', defaults: &#123; xtype: 'textfield', labelWidth: 50, width: 350, margin: '10 0 0 0', columnWidth: 1 &#125;, items: [ &#123; xtype: \"combobox\", itemId: 'area2', margin: '5 5 5 5', emptyText: '请选择', editable: false, fieldLabel: '&lt;span style=\"color: red\"&gt;*&lt;/span&gt;市', store: 'ManualAreaStore2', displayField: 'AreaName', valueField: 'Area2Code', allowBlank: false, listeners: &#123; select: function (combo, record, index) &#123; Ext.getCmp('manualWinId').down('#area3').setValue(''); Ext.getCmp('manualWinId').down('#area4').setValue(''); var store = Ext.getStore('ManualAreaStore1'); var Area2Code = record[0].data.Area2Code; var data = []; store.filterBy(function (_record, id) &#123; if (_record.get('AreaClass') == 3 &amp;&amp; _record.get('Area2Code') == Area2Code) &#123; data.push(_record); &#125; &#125;); Ext.getStore(\"ManualAreaStore3\").removeAll(); Ext.getStore(\"ManualAreaStore4\").removeAll(); Ext.getStore(\"ManualAreaStore3\").getProxy().data = data; Ext.getStore(\"ManualAreaStore3\").load(); if(Ext.getStore(\"ManualAreaStore3\").data.items.length)&#123; Ext.getCmp('manualWinId').down('#area3').setValue( Ext.getStore(\"ManualAreaStore3\").data.items[0].raw.Area3Code ); &#125; &#125; &#125; &#125;, &#123; xtype: \"combobox\", itemId: 'area3', margin: '5 5 5 5', emptyText: '请选择', editable: false, fieldLabel: '&lt;span style=\"color: red\"&gt;*&lt;/span&gt;区/县', store: 'ManualAreaStore3', displayField: 'AreaName', valueField: 'Area3Code', allowBlank: false, listeners: &#123; select: function (combo, record, index) &#123; Ext.getCmp('manualWinId').down('#area4').setValue(''); var store = Ext.getStore('ManualAreaStore1'); var Area3Code = record[0].data.Area3Code; var data = []; store.filterBy(function (_record, id) &#123; if (_record.get('AreaClass') == 4 &amp;&amp; _record.get('Area3Code') == Area3Code) &#123; data.push(_record); &#125; &#125;); Ext.getStore(\"ManualAreaStore4\").removeAll(); Ext.getStore(\"ManualAreaStore4\").getProxy().data = data; Ext.getStore(\"ManualAreaStore4\").load(); if(Ext.getStore(\"ManualAreaStore4\").data.items.length)&#123; Ext.getCmp('manualWinId').down('#area4').setValue( Ext.getStore(\"ManualAreaStore4\").data.items[0].raw.Area4Code ); &#125; &#125; &#125; &#125;, &#123; xtype: \"combobox\", itemId: 'area4', margin: '5 5 5 5', emptyText: '请选择', editable: false, fieldLabel: '&lt;span style=\"color: red\"&gt;*&lt;/span&gt;分区', store: 'ManualAreaStore4', displayField: 'AreaName', valueField: 'Area4Code', allowBlank: false &#125;, &#123; xtype: \"combobox\", itemId: 'username', margin: '5 5 5 5', emptyText: '请选择', editable: false, fieldLabel: '&lt;span style=\"color: red\"&gt;*&lt;/span&gt;姓名', // store: Ext.getStore('GroupStore'), displayField: 'acg_name', valueField: 'acg_code', allowBlank: false &#125; ] &#125;, &#123; xtype: 'form', layout: 'column', width: 380, border: false, itemId: 'formId3', defaults: &#123; xtype: 'textfield', labelWidth: 50, width: 350, margin: '10 0 0 0', columnWidth: 1 &#125;, items: [ &#123; xtype: \"combobox\", itemId: 'username', margin: '5 5 5 5', emptyText: '请选择', editable: false, fieldLabel: '&lt;span style=\"color: red\"&gt;*&lt;/span&gt;姓名', // store: Ext.getStore('GroupStore'), displayField: 'acg_name', valueField: 'acg_code', allowBlank: false &#125; ] &#125; ], buttons: [ '-&gt;', &#123; text: '确定', itemId: 'btnConfirm' &#125;, &#123; text: '取消', itemId: 'btnCancal' &#125;, '-&gt;' ] &#125;);&#125;.call(this));","categories":[{"name":"Ext","slug":"Ext","permalink":"https://in.imzhiyong.cn/categories/Ext/"}],"tags":[{"name":"store","slug":"store","permalink":"https://in.imzhiyong.cn/tags/store/"}]},{"title":"box-shadow常用值","slug":"H5/box-shadow常用值","date":"2018-08-16T11:16:49.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/08/16/H5/box-shadow常用值/","link":"","permalink":"https://in.imzhiyong.cn/2018/08/16/H5/box-shadow常用值/","excerpt":"","text":"123.box&#123; box-shadow: 4px 4px 4px rgba(0, 0, 0, 0.2);&#125;","categories":[{"name":"H5","slug":"H5","permalink":"https://in.imzhiyong.cn/categories/H5/"}],"tags":[{"name":"box-shadow","slug":"box-shadow","permalink":"https://in.imzhiyong.cn/tags/box-shadow/"}]},{"title":"video视频截图","slug":"H5/video视频截图","date":"2018-08-16T11:10:55.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/08/16/H5/video视频截图/","link":"","permalink":"https://in.imzhiyong.cn/2018/08/16/H5/video视频截图/","excerpt":"","text":"1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;!DOCTYPE html&gt;&lt;html lang=\"zh\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\" /&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\" /&gt; &lt;title&gt;Document&lt;/title&gt; &lt;script src=\"http://libs.baidu.com/jquery/2.0.0/jquery.min.js\"&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;video width=\"800\" height=\"600\" controls=\"controls\" id=\"video\"&gt; &lt;source src=\"img/1.mp4\" type=\"video/mp4\"&gt;&lt;/source&gt; 当前浏览器不支持 video标签 &lt;/video&gt; &lt;input type=\"button\" value=\"截图\" id=\"camera\" /&gt; &lt;br /&gt; &lt;img src=\"\" id=\"image\"/&gt; &lt;/body&gt;&lt;/html&gt;&lt;script type=\"text/javascript\"&gt; $(document).ready(function() &#123; $(\"#camera\").click(function() &#123; camera(); &#125;) &#125;) function camera() &#123; var video = document.getElementById(\"video\"); var canvas = document.createElement('canvas'); var ctx = canvas.getContext('2d'); var width = 400; var height = 300; canvas.width = width; canvas.height = height; ctx.drawImage(video, 0, 0, width, height); var images = canvas.toDataURL('image/png'); $(\"#image\").attr('src', images); &#125;&lt;/script&gt;","categories":[{"name":"H5","slug":"H5","permalink":"https://in.imzhiyong.cn/categories/H5/"}],"tags":[{"name":"video","slug":"video","permalink":"https://in.imzhiyong.cn/tags/video/"}]},{"title":"先根遍历文件夹","slug":"Node/先根遍历文件夹","date":"2018-08-16T10:59:11.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/08/16/Node/先根遍历文件夹/","link":"","permalink":"https://in.imzhiyong.cn/2018/08/16/Node/先根遍历文件夹/","excerpt":"","text":"遍历结束后执行回调函数每个文件或文件夹会遍历一次，遍历的总次数为文件和文件夹的和，遍历一次数量减1，为0时表示遍历结束，可以执行回调函数 1234567891011121314151617181920212223242526272829303132333435363738//根据树的遍历的原理遍历文件夹，先根遍历var fs = require('fs');var path = 'web/js';var len = 1;var picstr = '';explorer(path, function()&#123; console.log('picstr:', picstr);&#125;);function explorer(path, callback) &#123; fs.readdir(path, function (err, files) &#123; //err 为错误 , files 文件名列表包含文件夹与文件 if (err) &#123; console.log('error:\\n' + err); return; &#125; len += files.length; files.forEach(function (file) &#123; fs.stat(path + '/' + file, function (err, stat) &#123; if (err) &#123; console.log(err); return; &#125; if (stat.isDirectory()) &#123; // 如果是文件夹遍历 explorer(path + '/' + file, callback); &#125; else &#123; // 读出所有的文件 len--; picstr += path + '/' + file + '*'; if(len == 0)&#123; callback() &#125; &#125; &#125;); &#125;) len--; if(len == 0)&#123; callback() &#125; &#125;);&#125;","categories":[{"name":"Node","slug":"Node","permalink":"https://in.imzhiyong.cn/categories/Node/"}],"tags":[{"name":"fs","slug":"fs","permalink":"https://in.imzhiyong.cn/tags/fs/"}]},{"title":"combobox模糊匹配","slug":"Ext/combobox模糊匹配","date":"2018-08-16T10:54:05.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/08/16/Ext/combobox模糊匹配/","link":"","permalink":"https://in.imzhiyong.cn/2018/08/16/Ext/combobox模糊匹配/","excerpt":"","text":"使用本地store加载数据12345678910111213141516171819202122232425262728293031323334353637383940414243444546&#123; xtype: \"combobox\", itemId: 'appointName', margin: '5 5 5 5', emptyText: '请选择', // editable: false, fieldLabel: '&lt;span style=\"color: red\"&gt;*&lt;/span&gt;姓名', store: 'AppointManStore2', displayField: 'realname', valueField: 'mobile', allowBlank: false, listeners: &#123; beforequery: function (e) &#123; var combo = e.combo; combo.collapse(); if (!e.forceAll) &#123; var value = e.query; if (value != null &amp;&amp; value != '') &#123; combo.store.filterBy(function (record) &#123; var text = record.get(combo.displayField); // 用自己的过滤规则,如写正则式 return (text.indexOf(value) != -1); &#125;); &#125; else &#123; combo.store.clearFilter(); &#125; combo.onLoad();//不加第一次会显示不出来 combo.expand(); return false; &#125; &#125;, select: function (combo, record, index) &#123; Ext.getCmp('manualWinId').down('#area5').setValue(''); Ext.getCmp('manualWinId').down('#area6').setValue(''); var Area2Code = record[0].raw.Area2Code; var Area3Code = record[0].raw.Area3Code; if (Area2Code != '' &amp;&amp; Area2Code != '0') &#123; Ext.getCmp('manualWinId').down('#area5').setValue(Area2Code); &#125; if (Area3Code != '' &amp;&amp; Area3Code != '0') &#123; Ext.getCmp('manualWinId').down('#area6').setValue(Area3Code); &#125; &#125; &#125;&#125;","categories":[{"name":"Ext","slug":"Ext","permalink":"https://in.imzhiyong.cn/categories/Ext/"}],"tags":[{"name":"combobox","slug":"combobox","permalink":"https://in.imzhiyong.cn/tags/combobox/"}]},{"title":"Hexo+Github搭建个人博客","slug":"Other/Hexo-Github搭建个人博客","date":"2018-04-12T06:21:59.000Z","updated":"2020-09-16T03:44:06.895Z","comments":true,"path":"2018/04/12/Other/Hexo-Github搭建个人博客/","link":"","permalink":"https://in.imzhiyong.cn/2018/04/12/Other/Hexo-Github搭建个人博客/","excerpt":"搭建准备","text":"搭建准备 node.js 的安装与准备 git 的安装与准备 github 账户的配置 安装 node.js 环境node.js下载地址 安装 git 环境git下载地址 github 账户的注册与配置 到官网注册 github 账户 创建仓库 如果你的 github 名称是 imlzyong，那么你的仓库名称需填写为 imlzyong.github.io 开启 github pages 功能 打开右侧的 Settings，找到 Github Pages 并开启此功能 如果开启成功，你将会看到以下描述 安装 hexo新建一个文件夹，在该文件夹命令行中输入： 1npm install hexo-cli -g 执行结束后，继续输入： 1hexo -v 如果你看到了如图文字，则说明已经安装成功了 hexo 的相关配置初始化 hexo 1hexo init 安装所需要的插件，不要使用淘宝镜像进行安装，因为引用的方式不同会出现问题 1npm install 启动 hexo 的本地服务 1hexo s 在浏览器中打开 http://localhost:4000/ ，你将会看到： 到目前为止，hexo 在本地的配置已经全都结束了 将 hexo 与 GitHub Pages 联系起来配置 git 个人信息 设置 git 的 name 和 email 12git config --global user.name imlzyonggit config --global user.email imlzyong@163.com 生成密钥 如果不需要密码，可以直接3个回车即可 1ssh-keygen -t rsa -C imlzyong@163.com 最后得到了两个文件：id_rsa和id_rsa.pub，默认的存储路径是： 1C:\\Users\\Administrator\\.ssh 配置 Deployment安装扩展 1npm install hexo-deployer-git --save 在文件根目录的 _config.yml (站点配置文件)文件中，找到Deployment，然后按照如下修改： 1234deploy: type: git repo: git@github.com:yourname/yourname.github.io.git branch: master 比如我的仓库的地址是git@github.com:imlzyong/imlzyong.github.io.git，所以配置如下 1234deploy: type: git repo: git@github.com:imlzyong/imlzyong.github.io.git branch: master 写博客、发布文章新建一篇博客，执行下面的命令： 1hexo new post article 这时候在目录 source\\ _posts 将会看到 article.md 文件，文章编辑好之后，运行生成、部署命令： 12hexo g // 生成hexo d // 部署 当然你也可以执行下面的命令，相当于上面两条命令的效果 1hexo d -g // 在部署前先生成 部署成功后访问你的地址，https://yourName.github.io （这里输入我的地址：https://imlzyong.github.io ),将可以看到生成的文章 如果出现以下错误： Permission denied (publickey).fatal: Could not read from remote repository.Please make sure you have the correct access rights and the repository exists. 需要在 github 中添加 ssh（将之前生成的 id_rsa.pub 中的内容复制到 GitHub） 输入命令测试是否成功： 1ssh -T git@github.com 你将会看到： Hi imlzyong! You’ve successfully authenticated, but GitHub does not provide shell access. 如果你看到Hi后面是你的用户名，就说明成功了。 主题推荐及配置，源码地址next 主题 项目源码 部署代码","categories":[{"name":"Hexo","slug":"Hexo","permalink":"https://in.imzhiyong.cn/categories/Hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"https://in.imzhiyong.cn/tags/hexo/"},{"name":"github","slug":"github","permalink":"https://in.imzhiyong.cn/tags/github/"}]},{"title":"Gogs","slug":"Other/Gogs","date":"2018-04-12T03:30:17.000Z","updated":"2020-09-16T03:44:06.880Z","comments":true,"path":"2018/04/12/Other/Gogs/","link":"","permalink":"https://in.imzhiyong.cn/2018/04/12/Other/Gogs/","excerpt":"新建仓库","text":"新建仓库 初始化本地仓库1git init 添加要push到远程仓库的文件或文件夹(*表示全部文件)1git add * 将代码提交到本地仓库并填写备注信息1git commit -m xxx 建立与远程仓库的连接1git remote add origin http://192.168.1.50:10080/liuzhiyong/wyc.git 拉取并合并代码1git pull --rebase origin master 将本地仓库push到远程仓库1git push -u origin master","categories":[{"name":"Gogs","slug":"Gogs","permalink":"https://in.imzhiyong.cn/categories/Gogs/"}],"tags":[{"name":"Gogs","slug":"Gogs","permalink":"https://in.imzhiyong.cn/tags/Gogs/"}]},{"title":"webpack初学","slug":"Webpack/webpack初学","date":"2018-04-11T07:46:01.000Z","updated":"2020-09-16T03:44:06.895Z","comments":true,"path":"2018/04/11/Webpack/webpack初学/","link":"","permalink":"https://in.imzhiyong.cn/2018/04/11/Webpack/webpack初学/","excerpt":"安装","text":"安装 1234//全局安装npm install -g webpack//安装到项目目录 npm install --save-dev webpack 使用webpack前的准备创建 package.json 文件，这是又一个标准的 npm 说明文件，使用 npm init 命令可以自动创建这个文件 1npm init 在全局安装webpack作为依赖包 12//安装webpack npm install -g webpack 项目目录结构(secondary.js应该为greeter.js) index.html 主要是为了引入打包后的 js 文件，这里我们默认打包后的 js 文件为 bundle.js 1234567891011121314&lt;!-- index.html --&gt; &lt;!DOCTYPE html&gt; &lt;html lang=\"en\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=\"root\"&gt;&lt;/div&gt; &lt;script src=\"bundle.js\"&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt; greeter.js 定义一个返回包含问候信息的html元素的函数,并导出这个函数为一个模块 123456//greeter.js module.exports = function () &#123; var greet = document.createElement('div'); greet.textContent = \"hello webpack\"; return greet; &#125;; main.js 为主 js 文件 123//main.js var greeter = require('./greeter.js'); document.querySelector(\"#root\").appendChild(greeter()); 通过设置配置文件来使用webpack在项目的根目录下新建一个名为 webpack.config.js 的文件，并写好配置信息（文件名不能修改） 1234567module.exports = &#123; entry: __dirname + \"/app/main.js\",//唯一入口文件 output: &#123; path: __dirname + \"/public\",//打包后的文件存放的地方 filename: \"bundle.js\"//打包后输出文件的文件名 &#125; &#125; 然后只需要在终端下运行 webpack 命令实现打包操作，运行结果如下表示打包成功 可以看到 public 目录中多了一个文件 bundle.js ，即为打包后的文件 关于打包时的警告问题webpack 更新到 4.0.0 后，必须在“开发或者生产”模式中选择一种模式 有2种解决办法： 1、在执行打包命令时带入模式 12webpack --mode developmentwebpack --mode production 2、在 package.json 文件中加入引导 1234567891011121314151617&#123; \"name\": \"webpack\", \"version\": \"1.0.0\", \"description\": \"\", \"main\": \"index.js\", \"scripts\": &#123; \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\", \"dev\": \"webpack --mode development\", \"build\": \"webpack --mode production\" &#125;, \"author\": \"\", \"license\": \"ISC\", \"devDependencies\": &#123; \"webpack\": \"^4.2.0\", \"webpack-cli\": \"^2.0.13\" &#125; &#125; 在终端执行 1npm run dev 可以看到执行结果也是成功的 使用 webpack 构建本地服务器想使用 webpack 构建本地服务器，需要独立安装 webpack-dev-server 作为依赖 1npm install --save-dev webpack-dev-server 在 webpack.config.js 中添加相应的配置信息 1234567891011module.exports = &#123; entry: __dirname + \"/app/main.js\",//唯一入口文件 output: &#123; path: __dirname + \"/public\",//打包后的文件存放的地方 filename: \"bundle.js\"//打包后输出文件的文件名 &#125;, devServer: &#123; contentBase: \"./public\",//本地服务器所加载的页面所在的目录 port: '3000' &#125; &#125; 在 package.json 文件中添加引导，用以开启本地服务器 12345678910111213141516171819&#123; \"name\": \"webpack\", \"version\": \"1.0.0\", \"description\": \"\", \"main\": \"index.js\", \"scripts\": &#123; \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\", \"dev\": \"webpack --mode development\", \"build\": \"webpack --mode production\", &lt;span style=\"color:#ff0000;\"&gt;\"server\": \"webpack-dev-server --open\"&lt;/span&gt; &#125;, \"author\": \"\", \"license\": \"ISC\", \"devDependencies\": &#123; \"webpack\": \"^4.2.0\", \"webpack-cli\": \"^2.0.13\", \"webpack-dev-server\": \"^3.1.1\" &#125; &#125; 在终端中执行 1npm run server 会自动可开启服务，并打开本地服务器所加载的页面 缓存的问题缓存无处不在，使用缓存的最好方法是保证你的文件名和文件内容是匹配的（内容改变，名称相应改变），webpack可以把一个哈希值添加到打包的文件名中 1234567891011module.exports = &#123; entry: __dirname + \"/app/main.js\",//唯一入口文件 output: &#123; path: __dirname + \"/public\",//打包后的文件存放的地方 filename: \"&lt;span style=\"color:#ff0000;\"&gt;bundle-[hash].js&lt;/span&gt;\"//打包后输出文件的文件名 &#125;, devServer: &#123; contentBase: \"./public\",//本地服务器所加载的页面所在的目录 port: '3000' &#125; &#125; 重新执行打包的命令 1npm run dev 可以看到打包后的文件名带上了 hash 值，只要文件有修改，重新打包后的文件 hash 值就会改变，可以有效的避免缓存的问题 插件的使用HtmlWebpackPlugin这个插件的作用是依据一个简单的index.html模板，生成一个自动引用你打包后的JS文件的新index.html。这在每次生成的js文件名称不同时非常有用（比如添加了hash值） 安装 1npm install --save-dev html-webpack-plugin 在项目的根目录下新建文件夹 build 用于存放生成的 index.html 和 bundle.js （自动生成） 在项目的根目录下新建文件夹 tmpl 用于存放模板 在 tmpl 目录下新建文件 index.tmpl.html，不需要引入打包后的文件 12345678910111213&lt;!-- index.tmpl.html --&gt; &lt;!DOCTYPE html&gt; &lt;html lang=\"en\"&gt; &lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=\"root\"&gt;&lt;/div&gt; &lt;/body&gt; &lt;/html&gt; 更新 webpack 的配置文件 webpack.config.js 123456789101112131415161718var HtmlWebpackPlugin = require('html-webpack-plugin'); module.exports = &#123; entry: __dirname + \"/app/main.js\",//唯一入口文件 output: &#123; path: __dirname + \"/build\",// 修改了此处的目录，打包后的文件存放的地方 filename: \"bundle-[hash].js\"//打包后输出文件的文件名 &#125;, devServer: &#123; contentBase: \"./public\",//本地服务器所加载的页面所在的目录 port: '3000' &#125;, plugins: [ new HtmlWebpackPlugin(&#123; template: __dirname + \"/tmpl/index.tmpl.html\"//new 一个这个插件的实例，并传入相关的参数 &#125;) ] &#125; 执行打包命令 1npm run dev 执行结果为 build 文件夹中可以看到新生成的 index.html 和 打包后的 js 文件 clean-webpack-plugin添加了hash之后，会导致改变文件内容后重新打包时，文件名不同而内容越来越多 修改 greeter.js 的内容 12345module.exports = function () &#123; var greet = document.createElement('div'); greet.textContent = \"hello webpack hello world\"; return greet; &#125;; 再次执行打包命令 1npm run dev 可以发现 build 中多了一个打包文件，并且 index.html 中引入的 js 文件也改变为了新的打包文件，此时旧的打包文件也就没有用了 安装插件 1npm install --save-dev clean-webpack-plugin 更新 webpack 的配置文件 webpack.config.js 123456789101112131415161718192021222324var HtmlWebpackPlugin = require('html-webpack-plugin'); var CleanWebpackPlugin = require(\"clean-webpack-plugin\"); module.exports = &#123; entry: __dirname + \"/app/main.js\",//唯一入口文件 output: &#123; path: __dirname + \"/build\",// 修改了此处的目录，打包后的文件存放的地方 filename: \"bundle-[hash].js\"//打包后输出文件的文件名 &#125;, devServer: &#123; contentBase: \"./public\",//本地服务器所加载的页面所在的目录 port: '3000' &#125;, plugins: [ new HtmlWebpackPlugin(&#123; template: __dirname + \"/tmpl/index.tmpl.html\"//new 一个这个插件的实例，并传入相关的参数 &#125;), new CleanWebpackPlugin('build/*.*', &#123; root: __dirname, verbose: true, dry: false &#125;) ] &#125; 删除 build 中没有被要引用的打包文件 修改 greeter.js 文件 12345module.exports = function () &#123; var greet = document.createElement('div'); greet.textContent = \"hello webpack hello world hello clean-webpack-plugin\"; return greet; &#125;; 执行打包命令 1npm run dev 运行成功后可以看到 build 文件夹中的打包文件的名称变了，也就是自动删除了以前的打包文件，并且生成了新的打包文件，index.html 的引入文件也自动 修改为新的打包文件 More Info:Github","categories":[{"name":"Webpack","slug":"Webpack","permalink":"https://in.imzhiyong.cn/categories/Webpack/"}],"tags":[{"name":"webpack","slug":"webpack","permalink":"https://in.imzhiyong.cn/tags/webpack/"}]}],"categories":[{"name":"正则表达式","slug":"正则表达式","permalink":"https://in.imzhiyong.cn/categories/正则表达式/"},{"name":"H5","slug":"H5","permalink":"https://in.imzhiyong.cn/categories/H5/"},{"name":"javascript","slug":"javascript","permalink":"https://in.imzhiyong.cn/categories/javascript/"},{"name":"Node","slug":"Node","permalink":"https://in.imzhiyong.cn/categories/Node/"},{"name":"Ext","slug":"Ext","permalink":"https://in.imzhiyong.cn/categories/Ext/"},{"name":"Hexo","slug":"Hexo","permalink":"https://in.imzhiyong.cn/categories/Hexo/"},{"name":"Gogs","slug":"Gogs","permalink":"https://in.imzhiyong.cn/categories/Gogs/"},{"name":"Webpack","slug":"Webpack","permalink":"https://in.imzhiyong.cn/categories/Webpack/"}],"tags":[{"name":"截取字符串","slug":"截取字符串","permalink":"https://in.imzhiyong.cn/tags/截取字符串/"},{"name":"table","slug":"table","permalink":"https://in.imzhiyong.cn/tags/table/"},{"name":"禁止浏览器返回","slug":"禁止浏览器返回","permalink":"https://in.imzhiyong.cn/tags/禁止浏览器返回/"},{"name":"base64","slug":"base64","permalink":"https://in.imzhiyong.cn/tags/base64/"},{"name":"blob","slug":"blob","permalink":"https://in.imzhiyong.cn/tags/blob/"},{"name":"浏览器","slug":"浏览器","permalink":"https://in.imzhiyong.cn/tags/浏览器/"},{"name":"全屏","slug":"全屏","permalink":"https://in.imzhiyong.cn/tags/全屏/"},{"name":"notify","slug":"notify","permalink":"https://in.imzhiyong.cn/tags/notify/"},{"name":"background-clip","slug":"background-clip","permalink":"https://in.imzhiyong.cn/tags/background-clip/"},{"name":"before","slug":"before","permalink":"https://in.imzhiyong.cn/tags/before/"},{"name":"iframe","slug":"iframe","permalink":"https://in.imzhiyong.cn/tags/iframe/"},{"name":"file","slug":"file","permalink":"https://in.imzhiyong.cn/tags/file/"},{"name":"gridpanel","slug":"gridpanel","permalink":"https://in.imzhiyong.cn/tags/gridpanel/"},{"name":"气泡","slug":"气泡","permalink":"https://in.imzhiyong.cn/tags/气泡/"},{"name":"dataview","slug":"dataview","permalink":"https://in.imzhiyong.cn/tags/dataview/"},{"name":"store","slug":"store","permalink":"https://in.imzhiyong.cn/tags/store/"},{"name":"box-shadow","slug":"box-shadow","permalink":"https://in.imzhiyong.cn/tags/box-shadow/"},{"name":"video","slug":"video","permalink":"https://in.imzhiyong.cn/tags/video/"},{"name":"fs","slug":"fs","permalink":"https://in.imzhiyong.cn/tags/fs/"},{"name":"combobox","slug":"combobox","permalink":"https://in.imzhiyong.cn/tags/combobox/"},{"name":"hexo","slug":"hexo","permalink":"https://in.imzhiyong.cn/tags/hexo/"},{"name":"github","slug":"github","permalink":"https://in.imzhiyong.cn/tags/github/"},{"name":"Gogs","slug":"Gogs","permalink":"https://in.imzhiyong.cn/tags/Gogs/"},{"name":"webpack","slug":"webpack","permalink":"https://in.imzhiyong.cn/tags/webpack/"}]}